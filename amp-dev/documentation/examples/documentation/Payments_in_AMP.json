{"filePath":"examples/source/e-commerce/Payments_in_AMP.html","source":"<!--\n## Introduction\n\nVia [amp-iframe](/amp-dev/documentation/components/reference/amp-iframe-v0.1.md) and the `allowpaymentrequest` attribute, AMP pages can support requesting payment information directly from the browser. The PaymentRequest API is an [open W3C spec](https://www.w3.org/TR/payment-request.html) with support from most major browsers. This example won't go into detail on the API, but you can get more information in [this deep dive article](https://developers.google.com/web/fundamentals/discovery-and-monetization/payment-request/deep-dive-into-payment-request).\n\n  This example shows how to embed an iframe that contains only a \"buy now\" button. All of the actual payment logic is contained within the iframe src itself.\n\n--><!-- -->\n<!doctype html>\n<html ⚡>\n<head>\n<meta charset=\"utf-8\">\n  <title>Payments in AMP</title>\n  <link rel=\"canonical\" href=\"http://localhost:8080/documentation/examples/e-commerce/payments_in_amp/index.html\">\n  <meta name=\"viewport\" content=\"width=device-width,minimum-scale=1,initial-scale=1\">\n  <script async src=\"https://cdn.ampproject.org/v0.js\"></script>\n  <!-- ## Setup -->\n  <!--\n  The only extra component needed for this example is amp-iframe. -->\n  <script async custom-element=\"amp-iframe\" src=\"https://cdn.ampproject.org/v0/amp-iframe-0.1.js\"></script>\n\n  <style amp-custom>\n  :root {\n    --space-2: 1rem;\n  }\n  #payment-demo {\n    min-width: 320px;\n    min-height: 320px;\n  }\n  #payment-demo amp-iframe,\n  #payment-demo .label {\n    margin: var(--space-2);\n  }\n  #payment-demo amp-iframe button {\n    width: 130px;\n    height: 42px;\n  }\n  </style>\n\n  <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>\n</head>\n<body>\n  <div id=\"payment-demo\">\n    <amp-img src=\"/img/green_apple_2_1024x685.jpg\" width=\"1024\" height=\"682\" layout=\"responsive\">\n    </amp-img>\n    <div class=\"label\">Green Apples: $1.99</div>\n\n    <!-- ## Configuring the Iframe -->\n    <!--\n      In the basic case, the AMP page hands off all PaymentRequest logic to the iframe to complete purchase of a single item.\n\n      Crtically, the iframe does two things:\n\n      1. Sets the `allowpaymentrequest` attribute, which gives the iframe source permission to call PaymentRequest.show().\n      2. Passes a relevant product identifier via query string, allowing the iframe to retrive appropriate product information for this product.\n\n    -->\n    <amp-iframe title=\"Buy Now button to retrieve product information\" width=\"130\" height=\"42\" sandbox=\"allow-scripts allow-same-origin allow-top-navigation\" allowpaymentrequest frameborder=\"0\" noloading src=\"https://amp-by-example-api.appspot.com/iframe/payments.html?productId=1\">\n       <button placeholder disabled>Buy Now</button>\n    </amp-iframe>\n  </div>\n  <!--\n    Tip: we add a `placeholder` element to the `amp-iframe` to ensure that it can be loaded in the top viewport. The placeholder shows a disabled button until the iframe is loaded. We also disable the [default loading animation](/advanced/custom_loading_indicators/) using CSS.\n\n    However, since AMP does not allow javascript, the iframe source must also handle the case where PaymentRequest is not available. While currently out of scope for this example, potential options are to:\n\n    1. Swap the \"Buy Now\" button for an \"Add to cart\" button.\n    2. Redirect to a standard checkout form.\n    3. Hide the \"Buy Now\" button altogether, and have a separate AMP-based Add to Cart button (see the [Product Page demo](/amp-dev/documentation/examples/documentation/Product_Page.html?format=websites#add-to-cart-button))\n  -->\n</body></html>","document":{"sections":[{"doc_":"\n## Introduction\n\nVia [amp-iframe](/amp-dev/documentation/components/reference/amp-iframe-v0.1.md) and the `allowpaymentrequest` attribute, AMP pages can support requesting payment information directly from the browser. The PaymentRequest API is an [open W3C spec](https://www.w3.org/TR/payment-request.html) with support from most major browsers. This example won't go into detail on the API, but you can get more information in [this deep dive article](https://developers.google.com/web/fundamentals/discovery-and-monetization/payment-request/deep-dive-into-payment-request).\n\nThis example shows how to embed an iframe that contains only a \"buy now\" button. All of the actual payment logic is contained within the iframe src itself.\n\n","code":"","preview":"","inBody":false,"id":0,"cachedMarkedDoc":"<h2 id=\"introduction\" class=\"www-heading pb4 mb2 relative h3\">Introduction</h2><p class=\"mb2 px1\">Via <a href=\"/amp-dev/documentation/components/reference/amp-iframe-v0.1.md\">amp-iframe</a> and the <code>allowpaymentrequest</code> attribute, AMP pages can support requesting payment information directly from the browser. The PaymentRequest API is an <a href=\"https://www.w3.org/TR/payment-request.html\">open W3C spec</a> with support from most major browsers. This example won&#39;t go into detail on the API, but you can get more information in <a href=\"https://developers.google.com/web/fundamentals/discovery-and-monetization/payment-request/deep-dive-into-payment-request\">this deep dive article</a>.</p><p class=\"mb2 px1\">  This example shows how to embed an iframe that contains only a &quot;buy now&quot; button. All of the actual payment logic is contained within the iframe src itself.</p>","isLastSection":false,"isFirstSection":true,"commentOffset":0,"codeOffset":0,"headings":[{"id":"introduction","name":"Introduction"}],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"\n## Introduction\n\nVia [amp-iframe](/amp-dev/documentation/components/reference/amp-iframe-v0.1.md) and the `allowpaymentrequest` attribute, AMP pages can support requesting payment information directly from the browser. The PaymentRequest API is an [open W3C spec](https://www.w3.org/TR/payment-request.html) with support from most major browsers. This example won't go into detail on the API, but you can get more information in [this deep dive article](https://developers.google.com/web/fundamentals/discovery-and-monetization/payment-request/deep-dive-into-payment-request).\n\n  This example shows how to embed an iframe that contains only a \"buy now\" button. All of the actual payment logic is contained within the iframe src itself.\n\n\n"},{"doc_":"\n","code":"<!doctype html>\n<html ⚡>\n<head>\n<meta charset=\"utf-8\">\n  <title>Payments in AMP</title>\n  <link rel=\"canonical\" href=\"http://localhost:8080/documentation/examples/e-commerce/payments_in_amp/index.html\">\n  <meta name=\"viewport\" content=\"width=device-width,minimum-scale=1,initial-scale=1\">\n  <script async src=\"https://cdn.ampproject.org/v0.js\"></script>\n","preview":"","inBody":false,"id":1,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":0,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":" \n"},{"doc_":"## Setup\n","code":"","preview":"","inBody":false,"id":2,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":0,"headings":[{"id":"setup","name":"Setup"}],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"## Setup\n"},{"doc_":"\nThe only extra component needed for this example is amp-iframe. \n","code":"<script async custom-element=\"amp-iframe\" src=\"https://cdn.ampproject.org/v0/amp-iframe-0.1.js\"></script>\n","preview":"","inBody":false,"id":3,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":2,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"\nThe only extra component needed for this example is amp-iframe. \n"},{"doc_":"","code":"\n  <style amp-custom>\n  :root {\n    --space-2: 1rem;\n  }\n  #payment-demo {\n    min-width: 320px;\n    min-height: 320px;\n  }\n  #payment-demo amp-iframe,\n  #payment-demo .label {\n    margin: var(--space-2);\n  }\n  #payment-demo amp-iframe button {\n    width: 130px;\n    height: 42px;\n  }\n  </style>\n\n  <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>\n</head>\n<body>\n  <div id=\"payment-demo\">\n    <amp-img src=\"/img/green_apple_2_1024x685.jpg\"\n      width=\"1024\"\n      height=\"682\"\n      layout=\"responsive\">\n    </amp-img>\n    <div class=\"label\">Green Apples: $1.99</div>\n\n","preview":"  <div id=\"payment-demo\">\n    <amp-img src=\"/img/green_apple_2_1024x685.jpg\"\n      width=\"1024\"\n      height=\"682\"\n      layout=\"responsive\">\n    </amp-img>\n    <div class=\"label\">Green Apples: $1.99</div>\n\n","inBody":false,"id":4,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":0,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":""},{"doc_":"## Configuring the Iframe\n","code":"","preview":"","inBody":true,"id":5,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":0,"headings":[{"id":"configuring-the-iframe","name":"Configuring the Iframe"}],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"## Configuring the Iframe\n"},{"doc_":"\nIn the basic case, the AMP page hands off all PaymentRequest logic to the iframe to complete purchase of a single item.\n\nCrtically, the iframe does two things:\n\n1. Sets the `allowpaymentrequest` attribute, which gives the iframe source permission to call PaymentRequest.show().\n2. Passes a relevant product identifier via query string, allowing the iframe to retrive appropriate product information for this product.\n\n","code":"<amp-iframe title=\"Buy Now button to retrieve product information\"\n  width=\"130\"\n  height=\"42\"\n  sandbox=\"allow-scripts allow-same-origin allow-top-navigation\"\n  allowpaymentrequest\n  frameborder=\"0\"\n  noloading\n  src=\"https://amp-by-example-api.appspot.com/iframe/payments.html?productId=1\">\n  <button placeholder\n    disabled>Buy Now</button>\n</amp-iframe>\n","preview":"    <amp-iframe title=\"Buy Now button to retrieve product information\"\n      width=\"130\"\n      height=\"42\"\n      sandbox=\"allow-scripts allow-same-origin allow-top-navigation\"\n      allowpaymentrequest\n      frameborder=\"0\"\n      noloading\n      src=\"https://amp-by-example-api.appspot.com/iframe/payments.html?productId=1\">\n      <button placeholder\n        disabled>Buy Now</button>\n    </amp-iframe>\n","inBody":true,"id":6,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":4,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"\nIn the basic case, the AMP page hands off all PaymentRequest logic to the iframe to complete purchase of a single item.\n\nCrtically, the iframe does two things:\n\n1. Sets the `allowpaymentrequest` attribute, which gives the iframe source permission to call PaymentRequest.show().\n2. Passes a relevant product identifier via query string, allowing the iframe to retrive appropriate product information for this product.\n\n\n"},{"doc_":"","code":"</div>\n","preview":"  </div>\n","inBody":true,"id":7,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":2,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":""},{"doc_":"\nTip: we add a `placeholder` element to the `amp-iframe` to ensure that it can be loaded in the top viewport. The placeholder shows a disabled button until the iframe is loaded. We also disable the [default loading animation](/advanced/custom_loading_indicators/) using CSS.\n\nHowever, since AMP does not allow javascript, the iframe source must also handle the case where PaymentRequest is not available. While currently out of scope for this example, potential options are to:\n\n1. Swap the \"Buy Now\" button for an \"Add to cart\" button.\n2. Redirect to a standard checkout form.\n3. Hide the \"Buy Now\" button altogether, and have a separate AMP-based Add to Cart button (see the [Product Page demo](/amp-dev/documentation/examples/documentation/Product_Page.html?format=websites#add-to-cart-button))\n\n","code":"","preview":"","inBody":true,"id":8,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":0,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"\nTip: we add a `placeholder` element to the `amp-iframe` to ensure that it can be loaded in the top viewport. The placeholder shows a disabled button until the iframe is loaded. We also disable the [default loading animation](/advanced/custom_loading_indicators/) using CSS.\n\nHowever, since AMP does not allow javascript, the iframe source must also handle the case where PaymentRequest is not available. While currently out of scope for this example, potential options are to:\n\n1. Swap the \"Buy Now\" button for an \"Add to cart\" button.\n2. Redirect to a standard checkout form.\n3. Hide the \"Buy Now\" button altogether, and have a separate AMP-based Add to Cart button (see the [Product Page demo](/amp-dev/documentation/examples/documentation/Product_Page.html?format=websites#add-to-cart-button))\n\n"},{"doc_":"","code":"</body>\n</html>\n","preview":"","inBody":false,"id":9,"cachedMarkedDoc":false,"isLastSection":true,"isFirstSection":false,"commentOffset":0,"codeOffset":0,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":""}],"head":"<meta charset=\"utf-8\">\n  <title>Payments in AMP</title>\n  <link rel=\"canonical\" href=\"http://localhost:8080/documentation/examples/e-commerce/payments_in_amp/index.html\">\n  <meta name=\"viewport\" content=\"width=device-width,minimum-scale=1,initial-scale=1\">\n  <script async src=\"https://cdn.ampproject.org/v0.js\"></script>\n  <script async custom-element=\"amp-iframe\" src=\"https://cdn.ampproject.org/v0/amp-iframe-0.1.js\"></script>\n\n\n  <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>\n","styles":"  :root {\n    --space-2: 1rem;\n  }\n  #payment-demo {\n    min-width: 320px;\n    min-height: 320px;\n  }\n  #payment-demo amp-iframe,\n  #payment-demo .label {\n    margin: var(--space-2);\n  }\n  #payment-demo amp-iframe button {\n    width: 130px;\n    height: 42px;\n  }\n","title":"Payments in AMP","metadata":{"preview":"default","teaserImage":"/static/samples/img/teaser/payments_in_amp.jpg","author":"sebastianbenz"},"body":"<body>","elementsAfterBody":"","isAmpStory":false,"isAmpWeb":true,"isAmpAds":false,"isAmpEmail":false,"firstImage":"/favicons/android-chrome-256x256.png","lang":"en","_description":"Via amp-iframe and the allowpaymentrequest attribute, AMP pages can support requesting payment information directly from the browser."},"route":"/documentation/examples/e-commerce/payments_in_amp/index.html"}