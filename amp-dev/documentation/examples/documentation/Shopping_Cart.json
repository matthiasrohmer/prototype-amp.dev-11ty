{"filePath":"examples/source/e-commerce/Shopping_Cart/index.html","source":"<!doctype html>\n<html ⚡>\n<head>\n<meta charset=\"utf-8\">\n  <script async src=\"https://cdn.ampproject.org/v0.js\"></script>\n  <script async custom-element=\"amp-list\" src=\"https://cdn.ampproject.org/v0/amp-list-0.1.js\"></script>\n  <script async custom-template=\"amp-mustache\" src=\"https://cdn.ampproject.org/v0/amp-mustache-0.2.js\"></script>\n  <script async custom-element=\"amp-form\" src=\"https://cdn.ampproject.org/v0/amp-form-0.1.js\"></script>\n  <script async custom-element=\"amp-bind\" src=\"https://cdn.ampproject.org/v0/amp-bind-0.1.js\"></script>\n  <title>Shopping Cart</title>\n  <link rel=\"canonical\" href=\"http://localhost:8080/documentation/examples/e-commerce/shopping_cart/index.html\">\n  <meta name=\"viewport\" content=\"width=device-width,minimum-scale=1,initial-scale=1\">\n  <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>\n  <style amp-custom>\n    .shopping-cart {\n      background: #f2f2f2;\n    }\n    .item-headline{\n      padding:1rem\n    }\n    .item-details {\n      display: flex;\n      flex-wrap: wrap;\n      padding-bottom:1rem;\n    }\n    .shopping-cart > *:nth-child(2n+1) {\n      font-weight: 600;\n    }\n    .item-details > * {\n      box-sizing: border-box;\n      flex-grow: 1;\n      overflow: hidden;\n    }\n    .item-attribute {\n      padding-left:1rem;\n      padding-right:1rem\n    }\n    .delete-button {\n      background: none;\n      box-shadow: none;\n      border-radius: 0px;\n      width:30px\n    }\n  </style>\n</head>\n<body>\n    <div class=\"shopping-cart\">\n        <!-- We use [amp-list](/documentation/components/amp-list), to show a dynamic list of items in the cart.\n\n        `amp-list` needs to send the session cookie on the header of the request, so that the server can retrieve the contents of the cart on the session. For this reason, we use  [credentails=\"include\"](/documentation/guides-and-tutorials/learn/amp-caches-and-cors/amp-cors-requests.html), as an additional attribute.\n\n        Each row of this list, contains a button to remove items from the cart, that works in the following way:\n\n        2. Clicking on the \"remove\" button, updates an state object (`cartItem`), which, in turn, update two hidden fields on the form `form-cart-delete`, and also triggers a form submission. This form will call the server to update the cart, and update the `cartItemsList` object with the response.\n        2. The `amp-list` component contains the expression `[src]=\"cartItemsList.items\"`, so that, when the `cartItemsList` object changes, as a result of the previous action, the list gets refreshed with the content of the updated cart.\n        -->\n        <amp-list credentials=\"include\" layout=\"responsive\" height=\"100px\" width=\"500px\" src=\"http://localhost:8080/documentation/examples/e-commerce/shopping_cart/cart-items\" [src]=\"cartItemsList.items\" binding=\"no\">\n            <template type=\"amp-mustache\" id=\"cart-items\">\n                {{#isEmpty}}\n                <h3>Your Basket is Empty. </h3>\n                {{/isEmpty}}\n                {{^isEmpty}}\n                {{#cartItems}}\n                <div class=\"item-headline\">{{name}} - {{price}}</div>\n                <div class=\"item-details\">\n                    <div class=\"item-attribute\">Color: {{color}}</div>\n                    <div>Size: {{size}}</div>\n                    <div>Qty: {{quantity}}</div>\n                    <button type=\"button\" class=\"delete-button\" on=\"tap: AMP.setState({cartItem:\n                                    { id: '{{id}}',\n                                      size: '{{size}}'\n                                    }}), form-cart-delete.submit\">X</button>\n                </div>\n                <br>\n                {{/cartItems}}\n                {{/isEmpty}}\n            </template>\n        </amp-list>\n    </div>\n\n    <!-- ## Delete Items Form -->\n    <!--\n    As said, we use [amp-form](/documentation/components/amp-form) to send an `XHR POST` request to `/delete-cart-item`:\n\n    1. The form contains two hidden input fields, bound to the `cartItem` object's variables. When the remove button is clicked, this object gets updated with the details of the item to remove from cart, so the form can send them on the call to the server.\n    2. The form updates the `cartItemsList` with the response from the server, so that  `amp-list` can be refreshed with the contents of the updated cart.\n    -->\n    <form id=\"form-cart-delete\" method=\"POST\" target=\"_top\" action-xhr=\"http://localhost:8080/documentation/examples/e-commerce/shopping_cart/delete-cart-item\" on=\"submit-success: AMP.setState({\n                cartItemsList: event.response\n            })\" novalidate>\n        <input type=\"hidden\" name=\"id\" value [value]=\"cartItem.id\">\n        <input type=\"hidden\" name=\"size\" value [value]=\"cartItem.size\">\n    </form>\n    <!-- ## Cart List Object -->\n    <!-- This object will be updated after the removal of an item, with the contents of the updated cart. -->\n    <amp-state id=\"cartItemsList\">\n        <script type=\"application/json\">\n        {\n\n        }\n        </script>\n    </amp-state>\n    <!-- ## Cart Item Object -->\n    <!-- This object acts as a proxy between the action of removing items, and the form submission. -->\n    <amp-state id=\"cartItem\">\n        <script type=\"application/json\">\n        {\n\n        }\n        </script>\n    </amp-state>\n</body></html>","document":{"sections":[{"doc_":"","code":"<!doctype html>\n<html ⚡>\n<head>\n<meta charset=\"utf-8\">\n  <script async src=\"https://cdn.ampproject.org/v0.js\"></script>\n  <script async custom-element=\"amp-list\" src=\"https://cdn.ampproject.org/v0/amp-list-0.1.js\"></script>\n  <script async custom-template=\"amp-mustache\" src=\"https://cdn.ampproject.org/v0/amp-mustache-0.2.js\"></script>\n  <script async custom-element=\"amp-form\" src=\"https://cdn.ampproject.org/v0/amp-form-0.1.js\"></script>\n  <script async custom-element=\"amp-bind\" src=\"https://cdn.ampproject.org/v0/amp-bind-0.1.js\"></script>\n  <title>Shopping Cart</title>\n  <link rel=\"canonical\" href=\"http://localhost:8080/documentation/examples/e-commerce/shopping_cart/index.html\">\n  <meta name=\"viewport\" content=\"width=device-width,minimum-scale=1,initial-scale=1\">\n  <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>\n  <style amp-custom>\n    .shopping-cart {\n      background: #f2f2f2;\n    }\n    .item-headline{\n      padding:1rem\n    }\n    .item-details {\n      display: flex;\n      flex-wrap: wrap;\n      padding-bottom:1rem;\n    }\n    .shopping-cart > *:nth-child(2n+1) {\n      font-weight: 600;\n    }\n    .item-details > * {\n      box-sizing: border-box;\n      flex-grow: 1;\n      overflow: hidden;\n    }\n    .item-attribute {\n      padding-left:1rem;\n      padding-right:1rem\n    }\n    .delete-button {\n      background: none;\n      box-shadow: none;\n      border-radius: 0px;\n      width:30px\n    }\n  </style>\n</head>\n<body>\n  <div class=\"shopping-cart\">\n","preview":"  <div class=\"shopping-cart\">\n","inBody":false,"id":0,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":true,"commentOffset":0,"codeOffset":0,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":""},{"doc_":"We use [amp-list](/documentation/components/amp-list), to show a dynamic list of items in the cart.\n\n`amp-list` needs to send the session cookie on the header of the request, so that the server can retrieve the contents of the cart on the session. For this reason, we use  [credentails=\"include\"](/documentation/guides-and-tutorials/learn/amp-caches-and-cors/amp-cors-requests.html), as an additional attribute.\n\nEach row of this list, contains a button to remove items from the cart, that works in the following way:\n\n2. Clicking on the \"remove\" button, updates an state object (`cartItem`), which, in turn, update two hidden fields on the form `form-cart-delete`, and also triggers a form submission. This form will call the server to update the cart, and update the `cartItemsList` object with the response.\n\n2. The `amp-list` component contains the expression `[src]=\"cartItemsList.items\"`, so that, when the `cartItemsList` object changes, as a result of the previous action, the list gets refreshed with the content of the updated cart.\n\n","code":"<amp-list credentials=\"include\"\n  layout=\"responsive\"\n  height=\"100px\"\n  width=\"500px\"\n  src=\"http://localhost:8080/documentation/examples/e-commerce/shopping_cart/cart-items\"\n  [src]=\"cartItemsList.items\"\n  binding=\"no\">\n  <template type=\"amp-mustache\"\n    id=\"cart-items\">\n    {{#isEmpty}}\n      <h3>Your Basket is Empty. </h3>\n    {{/isEmpty}}\n    {{^isEmpty}}\n      {{#cartItems}}\n        <div class=\"item-headline\">{{name}} - {{price}}</div>\n        <div class=\"item-details\">\n          <div class=\"item-attribute\">Color: {{color}}</div>\n          <div>Size: {{size}}</div>\n          <div>Qty: {{quantity}}</div>\n          <button type=\"button\"\n            class=\"delete-button\"\n            on=\"tap: AMP.setState({cartItem:\n                                { id: '{{id}}',\n                                  size: '{{size}}'\n                                }}), form-cart-delete.submit\">X</button>\n        </div>\n        <br>\n      {{/cartItems}}\n    {{/isEmpty}}\n  </template>\n</amp-list>\n","preview":"    <amp-list credentials=\"include\"\n      layout=\"responsive\"\n      height=\"100px\"\n      width=\"500px\"\n      src=\"http://localhost:8080/documentation/examples/e-commerce/shopping_cart/cart-items\"\n      [src]=\"cartItemsList.items\"\n      binding=\"no\">\n      <template type=\"amp-mustache\"\n        id=\"cart-items\">\n        {{#isEmpty}}\n          <h3>Your Basket is Empty. </h3>\n        {{/isEmpty}}\n        {{^isEmpty}}\n          {{#cartItems}}\n            <div class=\"item-headline\">{{name}} - {{price}}</div>\n            <div class=\"item-details\">\n              <div class=\"item-attribute\">Color: {{color}}</div>\n              <div>Size: {{size}}</div>\n              <div>Qty: {{quantity}}</div>\n              <button type=\"button\"\n                class=\"delete-button\"\n                on=\"tap: AMP.setState({cartItem:\n                                    { id: '{{id}}',\n                                      size: '{{size}}'\n                                    }}), form-cart-delete.submit\">X</button>\n            </div>\n            <br>\n          {{/cartItems}}\n        {{/isEmpty}}\n      </template>\n    </amp-list>\n","inBody":true,"id":1,"cachedMarkedDoc":"<p class=\"mb2 px1\">We use <a href=\"/documentation/components/amp-list\">amp-list</a>, to show a dynamic list of items in the cart.</p><p class=\"mb2 px1\">   <code>amp-list</code> needs to send the session cookie on the header of the request, so that the server can retrieve the contents of the cart on the session. For this reason, we use  <a href=\"/documentation/guides-and-tutorials/learn/amp-caches-and-cors/amp-cors-requests.html\">credentails=&quot;include&quot;</a>, as an additional attribute.</p><p class=\"mb2 px1\">   Each row of this list, contains a button to remove items from the cart, that works in the following way:</p><ol start=\"2\">\n<li>Clicking on the &quot;remove&quot; button, updates an state object (<code>cartItem</code>), which, in turn, update two hidden fields on the form <code>form-cart-delete</code>, and also triggers a form submission. This form will call the server to update the cart, and update the <code>cartItemsList</code> object with the response.</li>\n<li>The <code>amp-list</code> component contains the expression <code>[src]=&quot;cartItemsList.items&quot;</code>, so that, when the <code>cartItemsList</code> object changes, as a result of the previous action, the list gets refreshed with the content of the updated cart.</li>\n</ol>\n","isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":4,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"We use [amp-list](/documentation/components/amp-list), to show a dynamic list of items in the cart.\n\n   `amp-list` needs to send the session cookie on the header of the request, so that the server can retrieve the contents of the cart on the session. For this reason, we use  [credentails=\"include\"](/documentation/guides-and-tutorials/learn/amp-caches-and-cors/amp-cors-requests.html), as an additional attribute.\n\n   Each row of this list, contains a button to remove items from the cart, that works in the following way:\n\n   2. Clicking on the \"remove\" button, updates an state object (`cartItem`), which, in turn, update two hidden fields on the form `form-cart-delete`, and also triggers a form submission. This form will call the server to update the cart, and update the `cartItemsList` object with the response.\n   2. The `amp-list` component contains the expression `[src]=\"cartItemsList.items\"`, so that, when the `cartItemsList` object changes, as a result of the previous action, the list gets refreshed with the content of the updated cart.\n   \n"},{"doc_":"","code":"</div>\n\n","preview":"  </div>\n\n","inBody":true,"id":2,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":2,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":""},{"doc_":"## Delete Items Form\n","code":"","preview":"","inBody":true,"id":3,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":0,"headings":[{"id":"delete-items-form","name":"Delete Items Form"}],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"## Delete Items Form\n"},{"doc_":"\nAs said, we use [amp-form](/documentation/components/amp-form) to send an `XHR POST` request to `/delete-cart-item`:\n\n1. The form contains two hidden input fields, bound to the `cartItem` object's variables. When the remove button is clicked, this object gets updated with the details of the item to remove from cart, so the form can send them on the call to the server.\n2. The form updates the `cartItemsList` with the response from the server, so that  `amp-list` can be refreshed with the contents of the updated cart.\n\n","code":"<form id=\"form-cart-delete\"\n  method=\"POST\"\n  target=\"_top\"\n  action-xhr=\"http://localhost:8080/documentation/examples/e-commerce/shopping_cart/delete-cart-item\"\n  on=\"submit-success: AMP.setState({\n              cartItemsList: event.response\n          })\"\n  novalidate>\n  <input type=\"hidden\"\n    name=\"id\"\n    value\n    [value]=\"cartItem.id\">\n  <input type=\"hidden\"\n    name=\"size\"\n    value\n    [value]=\"cartItem.size\">\n</form>\n","preview":"  <form id=\"form-cart-delete\"\n    method=\"POST\"\n    target=\"_top\"\n    action-xhr=\"http://localhost:8080/documentation/examples/e-commerce/shopping_cart/delete-cart-item\"\n    on=\"submit-success: AMP.setState({\n                cartItemsList: event.response\n            })\"\n    novalidate>\n    <input type=\"hidden\"\n      name=\"id\"\n      value\n      [value]=\"cartItem.id\">\n    <input type=\"hidden\"\n      name=\"size\"\n      value\n      [value]=\"cartItem.size\">\n  </form>\n","inBody":true,"id":4,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":2,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"\nAs said, we use [amp-form](/documentation/components/amp-form) to send an `XHR POST` request to `/delete-cart-item`:\n\n1. The form contains two hidden input fields, bound to the `cartItem` object's variables. When the remove button is clicked, this object gets updated with the details of the item to remove from cart, so the form can send them on the call to the server.\n2. The form updates the `cartItemsList` with the response from the server, so that  `amp-list` can be refreshed with the contents of the updated cart.\n\n"},{"doc_":"## Cart List Object\n","code":"","preview":"","inBody":true,"id":5,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":0,"headings":[{"id":"cart-list-object","name":"Cart List Object"}],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"## Cart List Object\n"},{"doc_":"This object will be updated after the removal of an item, with the contents of the updated cart. \n","code":"<amp-state id=\"cartItemsList\">\n  <script type=\"application/json\">\n    {\n\n    }\n  </script>\n</amp-state>\n","preview":"  <amp-state id=\"cartItemsList\">\n    <script type=\"application/json\">\n      {\n\n      }\n    </script>\n  </amp-state>\n","inBody":true,"id":6,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":2,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"This object will be updated after the removal of an item, with the contents of the updated cart. \n"},{"doc_":"## Cart Item Object\n","code":"","preview":"","inBody":true,"id":7,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":0,"headings":[{"id":"cart-item-object","name":"Cart Item Object"}],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"## Cart Item Object\n"},{"doc_":"This object acts as a proxy between the action of removing items, and the form submission. \n","code":"<amp-state id=\"cartItem\">\n  <script type=\"application/json\">\n    {\n\n    }\n  </script>\n</amp-state>\n","preview":"  <amp-state id=\"cartItem\">\n    <script type=\"application/json\">\n      {\n\n      }\n    </script>\n  </amp-state>\n","inBody":true,"id":8,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":2,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"This object acts as a proxy between the action of removing items, and the form submission. \n"},{"doc_":"","code":"</body>\n</html>\n","preview":"","inBody":false,"id":9,"cachedMarkedDoc":false,"isLastSection":true,"isFirstSection":false,"commentOffset":0,"codeOffset":0,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":""}],"head":"<meta charset=\"utf-8\">\n  <script async src=\"https://cdn.ampproject.org/v0.js\"></script>\n  <script async custom-element=\"amp-list\" src=\"https://cdn.ampproject.org/v0/amp-list-0.1.js\"></script>\n  <script async custom-template=\"amp-mustache\" src=\"https://cdn.ampproject.org/v0/amp-mustache-0.2.js\"></script>\n  <script async custom-element=\"amp-form\" src=\"https://cdn.ampproject.org/v0/amp-form-0.1.js\"></script>\n  <script async custom-element=\"amp-bind\" src=\"https://cdn.ampproject.org/v0/amp-bind-0.1.js\"></script>\n  <title>Shopping Cart</title>\n  <link rel=\"canonical\" href=\"http://localhost:8080/documentation/examples/e-commerce/shopping_cart/index.html\">\n  <meta name=\"viewport\" content=\"width=device-width,minimum-scale=1,initial-scale=1\">\n  <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>\n","styles":"    .shopping-cart {\n      background: #f2f2f2;\n    }\n    .item-headline{\n      padding:1rem\n    }\n    .item-details {\n      display: flex;\n      flex-wrap: wrap;\n      padding-bottom:1rem;\n    }\n    .shopping-cart > *:nth-child(2n+1) {\n      font-weight: 600;\n    }\n    .item-details > * {\n      box-sizing: border-box;\n      flex-grow: 1;\n      overflow: hidden;\n    }\n    .item-attribute {\n      padding-left:1rem;\n      padding-right:1rem\n    }\n    .delete-button {\n      background: none;\n      box-shadow: none;\n      border-radius: 0px;\n      width:30px\n    }\n","title":"Shopping Cart","metadata":{"author":"demianrenzulli"},"body":"<body>","elementsAfterBody":"","isAmpStory":false,"isAmpWeb":true,"isAmpAds":false,"isAmpEmail":false,"firstImage":"/favicons/android-chrome-256x256.png","lang":"en","_description":"We use amp-list, to show a dynamic list of items in the cart."},"route":"/documentation/examples/e-commerce/shopping_cart/index.html"}