{"filePath":"examples/source/interactivity-dynamic-content/Comment_Section/index.html","source":"<!--\n## Introduction\n\nThis sample showcases how to build a comment section in AMP HTML using the [amp-form](/amp-dev/documentation/components/reference/amp-form-v0.1.md) component after a successful login flow. Login, type a comment and press the COMMENT button; your comment will not be persisted, so reload the page if you want to start commenting again.\n--><!-- -->\n<!doctype html>\n<html ⚡>\n<head>\n<meta charset=\"utf-8\">\n  <title>Comment Section</title>\n    <script async src=\"https://cdn.ampproject.org/v0.js\"></script>\n    <!--\n    ## Setup\n\n    We need a few components to implement the comment section:\n\n    `amp-form` for submitting new comments via a web form.\n    -->\n    <script async custom-element=\"amp-form\" src=\"https://cdn.ampproject.org/v0/amp-form-0.1.js\"></script>\n    <!-- `amp-access` for implementing a sign-in. -->\n    <script async custom-element=\"amp-access\" src=\"https://cdn.ampproject.org/v0/amp-access-0.1.js\"></script>\n    <!-- `amp-list` for dynamically rendering comments. -->\n    <script async custom-element=\"amp-list\" src=\"https://cdn.ampproject.org/v0/amp-list-0.1.js\"></script>\n    <!-- `amp-mustache` for client-side rendering. -->\n    <script async custom-template=\"amp-mustache\" src=\"https://cdn.ampproject.org/v0/amp-mustache-0.2.js\"></script>\n    <link rel=\"canonical\" href=\"http://localhost:8080/documentation/examples/interactivity-dynamic-content/comment_section/index.html\">\n    <meta name=\"viewport\" content=\"width=device-width,minimum-scale=1,initial-scale=1\">\n    <style amp-custom>\n    :root {\n      --color-primary: #005AF0;\n      --color-secondary: #00DCC0;\n\n      --space-1: .5rem;  /* 8px */\n      --space-2: 1rem;   /* 16px */\n      --space-3: 1.5rem; /* 24px */\n      --space-5: 4rem; /* 64px */\n\n      --box-shadow-1: 0 1px 1px 0 rgba(0,0,0,.14), 0 1px 1px -1px rgba(0,0,0,.14), 0 1px 5px 0 rgba(0,0,0,.12);\n    }\n    .comments {\n      margin: var(--space-2) 0;\n      min-width: 320px;\n      width: 100%;\n    }\n    .comments [overflow] {\n      position: absolute;\n      right: var(--space-3);\n      top: var(--space-1);\n    }\n    .comment {\n        background: var(--color-secondary);\n        margin: var(--space-2);\n        margin-top: 0;\n        margin-left: var(--space-5);\n        padding: var(--space-2);\n        box-shadow: var(--box-shadow-1);\n        position: relative;\n    }\n    .comment:before {\n      content: ' ';\n      height: 0;\n      position: absolute;\n      width: 0;\n      left: 10px;\n      border: 10px solid transparent;\n      border-right-color: var(--color-secondary);\n      top: 50%;\n      margin-top: -28px;\n      margin-left: -30px;\n    }\n    .comment:after {\n      content: ' ';\n      height: 48px;\n      position: absolute;\n      width: 48px;\n      top: 0;\n      left: -56px;\n      background-repeat: no-repeat;\n      background-image: url(\"data:image/svg+xml,%0A%3Csvg xmlns='http://www.w3.org/2000/svg' width='48' height='48' viewBox='0 0 24 24'%3E%3Cpath d='M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z'/%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3C/svg%3E\");\n    }\n    .comment .user {\n      color: var(--color-primary);\n      font-weight: 700;\n    }\n    .comment .date {\n      font-size: 12px;\n    }\n    .comment .placeholder {\n      display: inline-block;\n      height: 14px;\n      width: 150px;\n      background-color: #cccccc;\n      position: relative;\n      top: 3px;\n    }\n    .comment-form {\n      margin: var(--space-2);\n      margin-left: var(--space-5);\n      display: flex;\n      flex-direction: column;\n      justify-content: space-between;\n      align-items: flex-start;\n    }\n    .comment-form > textarea {\n      width: 100%;\n      margin: var(--space-2) 0;\n    }\n    .comment-form > input {\n      min-width: 320px;\n    }\n    .comment-sample {\n      padding: var(--space-2);\n      width: 100vw;\n      max-width: 700px;\n      min-height: 500px;\n      box-sizing: border-box;\n    }\n    .comment-sample > button {\n      margin: var(--space-2) 0;\n    }\n    </style>\n\n    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>\n    <!-- ## Sign-in -->\n    <!-- [amp-access](/components/amp-access) requires the definition of 3 endpoints as documented [here](/amp-dev/documentation/components/reference/amp-access-v0.1.md).\n\n    This sample allows an user to login and logout using an email and a password. Logout is implemented by configuring a second endpoint in the login property `sign-out`, find more [here](/amp-dev/documentation/components/reference/amp-access.md#login-page).  -->\n    <script id=\"amp-access\" type=\"application/json\">\n    {\n        \"authorization\": \"/documentation/examples/api/amp-access/authorization?rid=READER_ID&url=CANONICAL_URL&ref=DOCUMENT_REFERRER&_=RANDOM\",\n        \"noPingback\": \"true\",\n        \"login\": {\n          \"sign-in\": \"/documentation/examples/api/amp-access/login?rid=READER_ID\",\n          \"sign-out\": \"/documentation/examples/api/amp-access/logout?rid=READER_ID\"\n        },\n        \"authorizationFallbackResponse\": {\n            \"error\": true,\n            \"loggedIn\": false\n        }\n    }\n    </script>\n    </head>\n    <body>\n      <div class=\"comment-sample\">\n\n      <!-- In order to add comments users need to be logged in. We use `amp-access` to integrate login and to show and hide the login button depending on whether the user is logged in. `on=\"tap:amp-access.login-sign-in\"` specifies which action should be taken when clicking on the login button: `login` defines the property inside the `amp-access` json configuration, while `sign-in` defines the endpoint. -->\n        <button amp-access=\"NOT loggedIn\" amp-access-hide on=\"tap:amp-access.login-sign-in\">Login to comment</button>\n\n        <!-- We specify the logout via a login endpoint to be able to use the `return URL` environment variable. -->\n        <button amp-access=\"loggedIn\" amp-access-hide on=\"tap:amp-access.login-sign-out\">Logout</button>\n        <h2>Comments</h2>\n\n        <!--\n          ## Listing all comments\n\n          We use an `amp-list` to render existing comments to make sure that the latest comments appear if the page is loaded via the AMP Cache. As we don't know the number of comments in avance, we add an `overflow` button.\n        -->\n        <amp-list id=\"comments\" class=\"comments\" src=\"http://localhost:8080/documentation/examples/interactivity-dynamic-content/comment_section/comments\" layout=\"fixed-height\" height=\"200\" items=\".\" single-item binding=\"no\" credentials=\"include\" reset-on-refresh noloading>\n          <template type=\"amp-mustache\">\n            <div class=\"comment\">\n              <p><span class=\"user\">{{user}}</span> <span class=\"date\">{{date}}</span></p>\n              <p>{{text}}</p>\n            </div>\n          </template>\n          <button overflow>Show all comments</button>\n          <div placeholder>\n            <div class=\"comment\">\n              <p><span class=\"placeholder\"></span> <span class=\"placeholder\"></span></p>\n              <p><span class=\"placeholder\"></span></p>\n            </div>\n            <div class=\"comment\">\n              <p><span class=\"placeholder\"></span> <span class=\"placeholder\"></span></p>\n              <p><span class=\"placeholder\"></span></p>\n            </div>\n          </div>\n        </amp-list>\n        <!-- It's easy to implement a button to refresh the comments using the `amp-list`'s refresh action. We combine it with the `changeLayoutToContainer` action to resize the `amp-list` to fit the updated content. -->\n        <button on=\"tap: comments.changeToLayoutContainer, comments.refresh\">Refresh comments</button>\n\n        <!-- ## Writing a comment -->\n\n        <!--\n          Use `amp-form` for submitting a new comment. When the `submit-success` event is fired, we trigger a refresh of the comments list via the `refresh` action and resize the list via `changeToContainerLayout`. We also clear all form fields using the `clear` action.\n        -->\n        <form id=\"comment\" class=\"comment-form\" amp-access=\"loggedIn\" amp-access-hide method=\"post\" action-xhr=\"http://localhost:8080/documentation/examples/interactivity-dynamic-content/comment_section/comments/new\" target=\"_top\" on=\"submit-success:\n                    comments.changeToLayoutContainer,\n                    comments.refresh,\n                    comment.clear\">\n            <label for=\"ta1\" class>\n             Your comment:\n            </label>\n            <template amp-access-template type=\"amp-mustache\">\n              <small>Logged in as <strong>{{name}}</strong>.</small>\n            </template>\n          <textarea id=\"ta1\" name=\"text\" rows=\"5\"></textarea>\n          <input type=\"submit\" value=\"Submit\">\n          <div submit-error>\n            <template type=\"amp-mustache\">\n              Error! Looks like something went wrong with your comment, please try to submit it again. {{error}}\n            </template>\n          </div>\n        </form>\n      </div>\n</body></html>","document":{"sections":[{"doc_":"\n## Introduction\n\nThis sample showcases how to build a comment section in AMP HTML using the [amp-form](/amp-dev/documentation/components/reference/amp-form-v0.1.md) component after a successful login flow. Login, type a comment and press the COMMENT button; your comment will not be persisted, so reload the page if you want to start commenting again.\n\n","code":"","preview":"","inBody":false,"id":0,"cachedMarkedDoc":"<h2 id=\"introduction\" class=\"www-heading pb4 mb2 relative h3\">Introduction</h2><p class=\"mb2 px1\">This sample showcases how to build a comment section in AMP HTML using the <a href=\"/amp-dev/documentation/components/reference/amp-form-v0.1.md\">amp-form</a> component after a successful login flow. Login, type a comment and press the COMMENT button; your comment will not be persisted, so reload the page if you want to start commenting again.</p>","isLastSection":false,"isFirstSection":true,"commentOffset":0,"codeOffset":0,"headings":[{"id":"introduction","name":"Introduction"}],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"\n## Introduction\n\nThis sample showcases how to build a comment section in AMP HTML using the [amp-form](/amp-dev/documentation/components/reference/amp-form-v0.1.md) component after a successful login flow. Login, type a comment and press the COMMENT button; your comment will not be persisted, so reload the page if you want to start commenting again.\n\n"},{"doc_":"\n","code":"<!doctype html>\n<html ⚡>\n<head>\n<meta charset=\"utf-8\">\n  <title>Comment Section</title>\n    <script async src=\"https://cdn.ampproject.org/v0.js\"></script>\n","preview":"","inBody":false,"id":1,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":0,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":" \n"},{"doc_":"\n## Setup\n\nWe need a few components to implement the comment section:\n\n`amp-form` for submitting new comments via a web form.\n\n","code":"<script async custom-element=\"amp-form\" src=\"https://cdn.ampproject.org/v0/amp-form-0.1.js\"></script>\n","preview":"","inBody":false,"id":2,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":4,"headings":[{"id":"setup","name":"Setup"}],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"\n## Setup\n\nWe need a few components to implement the comment section:\n\n`amp-form` for submitting new comments via a web form.\n\n"},{"doc_":"`amp-access` for implementing a sign-in. \n","code":"<script async custom-element=\"amp-access\" src=\"https://cdn.ampproject.org/v0/amp-access-0.1.js\"></script>\n","preview":"","inBody":false,"id":3,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":4,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"`amp-access` for implementing a sign-in. \n"},{"doc_":"`amp-list` for dynamically rendering comments. \n","code":"<script async custom-element=\"amp-list\" src=\"https://cdn.ampproject.org/v0/amp-list-0.1.js\"></script>\n","preview":"","inBody":false,"id":4,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":4,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"`amp-list` for dynamically rendering comments. \n"},{"doc_":"`amp-mustache` for client-side rendering. \n","code":"<script async custom-template=\"amp-mustache\" src=\"https://cdn.ampproject.org/v0/amp-mustache-0.2.js\"></script>\n","preview":"","inBody":false,"id":5,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":4,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"`amp-mustache` for client-side rendering. \n"},{"doc_":"","code":"<link rel=\"canonical\" href=\"http://localhost:8080/documentation/examples/interactivity-dynamic-content/comment_section/index.html\">\n<meta name=\"viewport\" content=\"width=device-width,minimum-scale=1,initial-scale=1\">\n<style amp-custom>\n:root {\n  --color-primary: #005AF0;\n  --color-secondary: #00DCC0;\n\n  --space-1: .5rem;  /* 8px */\n  --space-2: 1rem;   /* 16px */\n  --space-3: 1.5rem; /* 24px */\n  --space-5: 4rem; /* 64px */\n\n  --box-shadow-1: 0 1px 1px 0 rgba(0,0,0,.14), 0 1px 1px -1px rgba(0,0,0,.14), 0 1px 5px 0 rgba(0,0,0,.12);\n}\n.comments {\n  margin: var(--space-2) 0;\n  min-width: 320px;\n  width: 100%;\n}\n.comments [overflow] {\n  position: absolute;\n  right: var(--space-3);\n  top: var(--space-1);\n}\n.comment {\n    background: var(--color-secondary);\n    margin: var(--space-2);\n    margin-top: 0;\n    margin-left: var(--space-5);\n    padding: var(--space-2);\n    box-shadow: var(--box-shadow-1);\n    position: relative;\n}\n.comment:before {\n  content: ' ';\n  height: 0;\n  position: absolute;\n  width: 0;\n  left: 10px;\n  border: 10px solid transparent;\n  border-right-color: var(--color-secondary);\n  top: 50%;\n  margin-top: -28px;\n  margin-left: -30px;\n}\n.comment:after {\n  content: ' ';\n  height: 48px;\n  position: absolute;\n  width: 48px;\n  top: 0;\n  left: -56px;\n  background-repeat: no-repeat;\n  background-image: url(\"data:image/svg+xml,%0A%3Csvg xmlns='http://www.w3.org/2000/svg' width='48' height='48' viewBox='0 0 24 24'%3E%3Cpath d='M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z'/%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3C/svg%3E\");\n}\n.comment .user {\n  color: var(--color-primary);\n  font-weight: 700;\n}\n.comment .date {\n  font-size: 12px;\n}\n.comment .placeholder {\n  display: inline-block;\n  height: 14px;\n  width: 150px;\n  background-color: #cccccc;\n  position: relative;\n  top: 3px;\n}\n.comment-form {\n  margin: var(--space-2);\n  margin-left: var(--space-5);\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  align-items: flex-start;\n}\n.comment-form > textarea {\n  width: 100%;\n  margin: var(--space-2) 0;\n}\n.comment-form > input {\n  min-width: 320px;\n}\n.comment-sample {\n  padding: var(--space-2);\n  width: 100vw;\n  max-width: 700px;\n  min-height: 500px;\n  box-sizing: border-box;\n}\n.comment-sample > button {\n  margin: var(--space-2) 0;\n}\n</style>\n\n<style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>\n","preview":"","inBody":false,"id":6,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":4,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":""},{"doc_":"## Sign-in\n","code":"","preview":"","inBody":false,"id":7,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":0,"headings":[{"id":"sign-in","name":"Sign-in"}],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"## Sign-in\n"},{"doc_":"\n[amp-access](/components/amp-access) requires the definition of 3 endpoints as documented [here](/amp-dev/documentation/components/reference/amp-access-v0.1.md).\n\nThis sample allows an user to login and logout using an email and a password. Logout is implemented by configuring a second endpoint in the login property `sign-out`, find more [here](/amp-dev/documentation/components/reference/amp-access.md#login-page).  \n","code":"<script id=\"amp-access\" type=\"application/json\">\n{\n    \"authorization\": \"/documentation/examples/api/amp-access/authorization?rid=READER_ID&url=CANONICAL_URL&ref=DOCUMENT_REFERRER&_=RANDOM\",\n    \"noPingback\": \"true\",\n    \"login\": {\n      \"sign-in\": \"/documentation/examples/api/amp-access/login?rid=READER_ID\",\n      \"sign-out\": \"/documentation/examples/api/amp-access/logout?rid=READER_ID\"\n    },\n    \"authorizationFallbackResponse\": {\n        \"error\": true,\n        \"loggedIn\": false\n    }\n}\n</script>\n","preview":"","inBody":false,"id":8,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":4,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":" [amp-access](/components/amp-access) requires the definition of 3 endpoints as documented [here](/amp-dev/documentation/components/reference/amp-access-v0.1.md).\n\nThis sample allows an user to login and logout using an email and a password. Logout is implemented by configuring a second endpoint in the login property `sign-out`, find more [here](/amp-dev/documentation/components/reference/amp-access.md#login-page).  \n"},{"doc_":"","code":"</head>\n<body>\n<div class=\"comment-sample\">\n\n","preview":"  <div class=\"comment-sample\">\n\n","inBody":false,"id":9,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":4,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":""},{"doc_":"In order to add comments users need to be logged in. We use `amp-access` to integrate login and to show and hide the login button depending on whether the user is logged in. `on=\"tap:amp-access.login-sign-in\"` specifies which action should be taken when clicking on the login button: `login` defines the property inside the `amp-access` json configuration, while `sign-in` defines the endpoint. \n","code":"<button amp-access=\"NOT loggedIn\"\n  amp-access-hide\n  on=\"tap:amp-access.login-sign-in\">Login to comment</button>\n","preview":"    <button amp-access=\"NOT loggedIn\"\n      amp-access-hide\n      on=\"tap:amp-access.login-sign-in\">Login to comment</button>\n","inBody":true,"id":10,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":4,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"In order to add comments users need to be logged in. We use `amp-access` to integrate login and to show and hide the login button depending on whether the user is logged in. `on=\"tap:amp-access.login-sign-in\"` specifies which action should be taken when clicking on the login button: `login` defines the property inside the `amp-access` json configuration, while `sign-in` defines the endpoint. \n"},{"doc_":"","code":"\n","preview":"\n","inBody":true,"id":11,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":0,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":""},{"doc_":"We specify the logout via a login endpoint to be able to use the `return URL` environment variable. \n","code":"<button amp-access=\"loggedIn\"\n  amp-access-hide\n  on=\"tap:amp-access.login-sign-out\">Logout</button>\n","preview":"    <button amp-access=\"loggedIn\"\n      amp-access-hide\n      on=\"tap:amp-access.login-sign-out\">Logout</button>\n","inBody":true,"id":12,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":4,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"We specify the logout via a login endpoint to be able to use the `return URL` environment variable. \n"},{"doc_":"","code":"<h2>Comments</h2>\n\n","preview":"    <h2>Comments</h2>\n\n","inBody":true,"id":13,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":4,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":""},{"doc_":"\n## Listing all comments\n\nWe use an `amp-list` to render existing comments to make sure that the latest comments appear if the page is loaded via the AMP Cache. As we don't know the number of comments in avance, we add an `overflow` button.\n\n","code":"<amp-list id=\"comments\"\n  class=\"comments\"\n  src=\"http://localhost:8080/documentation/examples/interactivity-dynamic-content/comment_section/comments\"\n  layout=\"fixed-height\"\n  height=\"200\"\n  items=\".\"\n  single-item\n  binding=\"no\"\n  credentials=\"include\"\n  reset-on-refresh\n  noloading>\n  <template type=\"amp-mustache\">\n    <div class=\"comment\">\n      <p><span class=\"user\">{{user}}</span> <span class=\"date\">{{date}}</span></p>\n      <p>{{text}}</p>\n    </div>\n  </template>\n  <button overflow>Show all comments</button>\n  <div placeholder>\n    <div class=\"comment\">\n      <p><span class=\"placeholder\"></span> <span class=\"placeholder\"></span></p>\n      <p><span class=\"placeholder\"></span></p>\n    </div>\n    <div class=\"comment\">\n      <p><span class=\"placeholder\"></span> <span class=\"placeholder\"></span></p>\n      <p><span class=\"placeholder\"></span></p>\n    </div>\n  </div>\n</amp-list>\n","preview":"    <amp-list id=\"comments\"\n      class=\"comments\"\n      src=\"http://localhost:8080/documentation/examples/interactivity-dynamic-content/comment_section/comments\"\n      layout=\"fixed-height\"\n      height=\"200\"\n      items=\".\"\n      single-item\n      binding=\"no\"\n      credentials=\"include\"\n      reset-on-refresh\n      noloading>\n      <template type=\"amp-mustache\">\n        <div class=\"comment\">\n          <p><span class=\"user\">{{user}}</span> <span class=\"date\">{{date}}</span></p>\n          <p>{{text}}</p>\n        </div>\n      </template>\n      <button overflow>Show all comments</button>\n      <div placeholder>\n        <div class=\"comment\">\n          <p><span class=\"placeholder\"></span> <span class=\"placeholder\"></span></p>\n          <p><span class=\"placeholder\"></span></p>\n        </div>\n        <div class=\"comment\">\n          <p><span class=\"placeholder\"></span> <span class=\"placeholder\"></span></p>\n          <p><span class=\"placeholder\"></span></p>\n        </div>\n      </div>\n    </amp-list>\n","inBody":true,"id":14,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":4,"headings":[{"id":"listing-all-comments","name":"Listing all comments"}],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"\n## Listing all comments\n\nWe use an `amp-list` to render existing comments to make sure that the latest comments appear if the page is loaded via the AMP Cache. As we don't know the number of comments in avance, we add an `overflow` button.\n\n"},{"doc_":"It's easy to implement a button to refresh the comments using the `amp-list`'s refresh action. We combine it with the `changeLayoutToContainer` action to resize the `amp-list` to fit the updated content. \n","code":"<button on=\"tap: comments.changeToLayoutContainer, comments.refresh\">Refresh comments</button>\n","preview":"    <button on=\"tap: comments.changeToLayoutContainer, comments.refresh\">Refresh comments</button>\n","inBody":true,"id":15,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":4,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"It's easy to implement a button to refresh the comments using the `amp-list`'s refresh action. We combine it with the `changeLayoutToContainer` action to resize the `amp-list` to fit the updated content. \n"},{"doc_":"","code":"\n","preview":"\n","inBody":true,"id":16,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":0,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":""},{"doc_":"## Writing a comment\n","code":"\n","preview":"\n","inBody":true,"id":17,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":0,"headings":[{"id":"writing-a-comment","name":"Writing a comment"}],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"## Writing a comment\n"},{"doc_":"\nUse `amp-form` for submitting a new comment. When the `submit-success` event is fired, we trigger a refresh of the comments list via the `refresh` action and resize the list via `changeToContainerLayout`. We also clear all form fields using the `clear` action.\n\n","code":"<form id=\"comment\"\n  class=\"comment-form\"\n  amp-access=\"loggedIn\"\n  amp-access-hide\n  method=\"post\"\n  action-xhr=\"http://localhost:8080/documentation/examples/interactivity-dynamic-content/comment_section/comments/new\"\n  target=\"_top\"\n  on=\"submit-success:\n                comments.changeToLayoutContainer,\n                comments.refresh,\n                comment.clear\">\n  <label for=\"ta1\"\n    class>\n    Your comment:\n  </label>\n  <template amp-access-template\n    type=\"amp-mustache\">\n    <small>Logged in as <strong>{{name}}</strong>.</small>\n  </template>\n  <textarea id=\"ta1\"\n    name=\"text\"\n    rows=\"5\"></textarea>\n  <input type=\"submit\"\n    value=\"Submit\">\n  <div submit-error>\n    <template type=\"amp-mustache\">\n      Error! Looks like something went wrong with your comment, please try to submit it again. {{error}}\n    </template>\n  </div>\n</form>\n","preview":"    <form id=\"comment\"\n      class=\"comment-form\"\n      amp-access=\"loggedIn\"\n      amp-access-hide\n      method=\"post\"\n      action-xhr=\"http://localhost:8080/documentation/examples/interactivity-dynamic-content/comment_section/comments/new\"\n      target=\"_top\"\n      on=\"submit-success:\n                    comments.changeToLayoutContainer,\n                    comments.refresh,\n                    comment.clear\">\n      <label for=\"ta1\"\n        class>\n        Your comment:\n      </label>\n      <template amp-access-template\n        type=\"amp-mustache\">\n        <small>Logged in as <strong>{{name}}</strong>.</small>\n      </template>\n      <textarea id=\"ta1\"\n        name=\"text\"\n        rows=\"5\"></textarea>\n      <input type=\"submit\"\n        value=\"Submit\">\n      <div submit-error>\n        <template type=\"amp-mustache\">\n          Error! Looks like something went wrong with your comment, please try to submit it again. {{error}}\n        </template>\n      </div>\n    </form>\n","inBody":true,"id":18,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":4,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"\nUse `amp-form` for submitting a new comment. When the `submit-success` event is fired, we trigger a refresh of the comments list via the `refresh` action and resize the list via `changeToContainerLayout`. We also clear all form fields using the `clear` action.\n\n"},{"doc_":"","code":"</div>\n","preview":"  </div>\n","inBody":true,"id":19,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":2,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":""},{"doc_":"","code":"</body>\n</html>\n","preview":"","inBody":false,"id":20,"cachedMarkedDoc":false,"isLastSection":true,"isFirstSection":false,"commentOffset":0,"codeOffset":0,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":""}],"head":"<meta charset=\"utf-8\">\n  <title>Comment Section</title>\n    <script async src=\"https://cdn.ampproject.org/v0.js\"></script>\n    <script async custom-element=\"amp-form\" src=\"https://cdn.ampproject.org/v0/amp-form-0.1.js\"></script>\n    <script async custom-element=\"amp-access\" src=\"https://cdn.ampproject.org/v0/amp-access-0.1.js\"></script>\n    <script async custom-element=\"amp-list\" src=\"https://cdn.ampproject.org/v0/amp-list-0.1.js\"></script>\n    <script async custom-template=\"amp-mustache\" src=\"https://cdn.ampproject.org/v0/amp-mustache-0.2.js\"></script>\n    <link rel=\"canonical\" href=\"http://localhost:8080/documentation/examples/interactivity-dynamic-content/comment_section/index.html\">\n    <meta name=\"viewport\" content=\"width=device-width,minimum-scale=1,initial-scale=1\">\n\n    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>\n    <script id=\"amp-access\" type=\"application/json\">\n    {\n        \"authorization\": \"/documentation/examples/api/amp-access/authorization?rid=READER_ID&url=CANONICAL_URL&ref=DOCUMENT_REFERRER&_=RANDOM\",\n        \"noPingback\": \"true\",\n        \"login\": {\n          \"sign-in\": \"/documentation/examples/api/amp-access/login?rid=READER_ID\",\n          \"sign-out\": \"/documentation/examples/api/amp-access/logout?rid=READER_ID\"\n        },\n        \"authorizationFallbackResponse\": {\n            \"error\": true,\n            \"loggedIn\": false\n        }\n    }\n    </script>\n","styles":"    :root {\n      --color-primary: #005AF0;\n      --color-secondary: #00DCC0;\n\n      --space-1: .5rem;  /* 8px */\n      --space-2: 1rem;   /* 16px */\n      --space-3: 1.5rem; /* 24px */\n      --space-5: 4rem; /* 64px */\n\n      --box-shadow-1: 0 1px 1px 0 rgba(0,0,0,.14), 0 1px 1px -1px rgba(0,0,0,.14), 0 1px 5px 0 rgba(0,0,0,.12);\n    }\n    .comments {\n      margin: var(--space-2) 0;\n      min-width: 320px;\n      width: 100%;\n    }\n    .comments [overflow] {\n      position: absolute;\n      right: var(--space-3);\n      top: var(--space-1);\n    }\n    .comment {\n        background: var(--color-secondary);\n        margin: var(--space-2);\n        margin-top: 0;\n        margin-left: var(--space-5);\n        padding: var(--space-2);\n        box-shadow: var(--box-shadow-1);\n        position: relative;\n    }\n    .comment:before {\n      content: ' ';\n      height: 0;\n      position: absolute;\n      width: 0;\n      left: 10px;\n      border: 10px solid transparent;\n      border-right-color: var(--color-secondary);\n      top: 50%;\n      margin-top: -28px;\n      margin-left: -30px;\n    }\n    .comment:after {\n      content: ' ';\n      height: 48px;\n      position: absolute;\n      width: 48px;\n      top: 0;\n      left: -56px;\n      background-repeat: no-repeat;\n      background-image: url(\"data:image/svg+xml,%0A%3Csvg xmlns='http://www.w3.org/2000/svg' width='48' height='48' viewBox='0 0 24 24'%3E%3Cpath d='M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z'/%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3C/svg%3E\");\n    }\n    .comment .user {\n      color: var(--color-primary);\n      font-weight: 700;\n    }\n    .comment .date {\n      font-size: 12px;\n    }\n    .comment .placeholder {\n      display: inline-block;\n      height: 14px;\n      width: 150px;\n      background-color: #cccccc;\n      position: relative;\n      top: 3px;\n    }\n    .comment-form {\n      margin: var(--space-2);\n      margin-left: var(--space-5);\n      display: flex;\n      flex-direction: column;\n      justify-content: space-between;\n      align-items: flex-start;\n    }\n    .comment-form > textarea {\n      width: 100%;\n      margin: var(--space-2) 0;\n    }\n    .comment-form > input {\n      min-width: 320px;\n    }\n    .comment-sample {\n      padding: var(--space-2);\n      width: 100vw;\n      max-width: 700px;\n      min-height: 500px;\n      box-sizing: border-box;\n    }\n    .comment-sample > button {\n      margin: var(--space-2) 0;\n    }\n","title":"Comment Section","metadata":{"preview":"default","experiments":["amp-list-resizable-children"],"teaserImage":"/static/samples/img/teaser/comment_section.jpg","author":"aghassemi"},"body":"<body>","elementsAfterBody":"","isAmpStory":false,"isAmpWeb":true,"isAmpAds":false,"isAmpEmail":false,"firstImage":"/favicons/android-chrome-256x256.png","lang":"en","_description":"This sample showcases how to build a comment section in AMP HTML using the amp-form component after a successful login flow."},"route":"/documentation/examples/interactivity-dynamic-content/comment_section/index.html"}