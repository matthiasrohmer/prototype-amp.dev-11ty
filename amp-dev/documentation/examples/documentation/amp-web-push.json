{"filePath":"examples/source/1.components/amp-web-push/index.html","source":"<!--\n  ## Introduction\n\n  The [amp-web-push](/content/amp-dev/documentation/components/reference/amp-web-push-v0.1.md) component allows users to subscribe to web push notifications.\n-->\n<!-- -->\n<!doctype html>\n<html ⚡>\n\n<head>\n    <meta charset=\"utf-8\">\n    <title>amp-web-push</title>\n    <link rel=\"canonical\" href=\"http://localhost:8080/documentation/examples/components/amp-web-push/index.html\">\n    <meta name=\"viewport\" content=\"width=device-width,minimum-scale=1,initial-scale=1\">\n    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript>\n        <style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style>\n    </noscript>\n    <!-- ## Setup -->\n    <!--\n      Import the `amp-web-push` component in the header.\n    -->\n    <script async custom-element=\"amp-web-push\" src=\"https://cdn.ampproject.org/v0/amp-web-push-0.1.js\"></script>\n    <!--\n      The `amp-form` component is being used in this demo, to send a post request so the notification can be prepared and sent.\n    -->\n    <script async custom-element=\"amp-form\" src=\"https://cdn.ampproject.org/v0/amp-form-0.1.js\"></script>\n    <script async src=\"https://cdn.ampproject.org/v0.js\"></script>\n</head>\n\n<body>\n    <!-- ## Basic usage -->\n    <!--\n    The `amp-web-push` component requires two additional HTML files as well as an amp-web-push compatible Service Worker. These three files form the configuration described below.\n    -->\n    <amp-web-push \n        id=\"amp-web-push\"\n        layout=\"nodisplay\"\n        helper-iframe-url=\"http://localhost:8080/documentation/examples/components/amp-web-push/amp-web-push-helper-frame.html\"\n        permission-dialog-url=\"http://localhost:8080/documentation/examples/components/amp-web-push/amp-web-push-permission-dialog.html\"\n        service-worker-url=\"http://localhost:8080/documentation/examples/components/amp-web-push/sw.js\"\n        service-worker-scope=\"http://localhost:8080/documentation/examples/components/amp-web-push/\">\n    </amp-web-push>\n\n    <!-- Clicking the subscription widget pops up a page prompting the user for notification permissions and signals the service worker (configured below) to subscribe the user to push in the background. On this example, we are intercepting the call to `onMessageReceivedSubscribe`, and storing the subscription object on IndexedDB.\n    -->\n    <amp-web-push-widget visibility=\"unsubscribed\" layout=\"fixed\" width=\"500\" height=\"70\">\n        <button on=\"tap:amp-web-push.subscribe\">Subscribe to Notifications</button>\n    </amp-web-push-widget>\n\n    <!-- Clicking the unsubscription widget signals the worker to unsubscribe the user from push in the background. On this example, we'll be also removing the previoulsy stored subscription object from IndexedDB.\n    -->\n    <amp-web-push-widget visibility=\"subscribed\" layout=\"fixed\" width=\"500\" height=\"180\">\n        <button on=\"tap:amp-web-push.unsubscribe\">Unsubscribe from Notifications</button>\n        <form method=\"post\" action-xhr=\"http://localhost:8080/documentation/examples/components/amp-web-push/send-push\" target=\"_top\">\n            <input type=\"submit\" value=\"Send Web Push\">\n            <div submitting>\n                Sending Push message...\n            </div>\n            <div submit-success>\n                Web Push sent!\n            </div>\n            <div submit-error>\n                Something went wrong.\n            </div>\n        </form>\n    </amp-web-push-widget>\n    <amp-web-push-widget visibility=\"blocked\" layout=\"fixed\" width=\"250\" height=\"80\">\n        Looks like you've blocked notifications!\n    </amp-web-push-widget>\n</body>\n\n</html>","document":{"sections":[{"doc_":"","code":"\n","preview":"","inBody":false,"id":0,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":true,"commentOffset":0,"codeOffset":0,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":""},{"doc_":"\n## Introduction\n\nThe [amp-web-push](/content/amp-dev/documentation/components/reference/amp-web-push-v0.1.md) component allows users to subscribe to web push notifications.\n\n","code":"","preview":"","inBody":false,"id":1,"cachedMarkedDoc":"<h2 id=\"introduction\" class=\"www-heading pb4 mb2 relative h3\">Introduction</h2><p class=\"mb2 px1\">The <a href=\"/content/amp-dev/documentation/components/reference/amp-web-push-v0.1.md\">amp-web-push</a> component allows users to subscribe to web push notifications.</p>","isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":0,"headings":[{"id":"introduction","name":"Introduction"}],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"\n## Introduction\n\nThe [amp-web-push](/content/amp-dev/documentation/components/reference/amp-web-push-v0.1.md) component allows users to subscribe to web push notifications.\n\n"},{"doc_":"\n","code":"<!doctype html>\n<html ⚡>\n\n<head>\n    <meta charset=\"utf-8\">\n    <title>amp-web-push</title>\n    <link rel=\"canonical\" href=\"http://localhost:8080/documentation/examples/components/amp-web-push/index.html\">\n    <meta name=\"viewport\" content=\"width=device-width,minimum-scale=1,initial-scale=1\">\n    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript>\n        <style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style>\n    </noscript>\n","preview":"","inBody":false,"id":2,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":0,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":" \n"},{"doc_":"## Setup\n","code":"","preview":"","inBody":false,"id":3,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":0,"headings":[{"id":"setup","name":"Setup"}],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"## Setup\n"},{"doc_":"\nImport the `amp-web-push` component in the header.\n\n","code":"<script async custom-element=\"amp-web-push\" src=\"https://cdn.ampproject.org/v0/amp-web-push-0.1.js\"></script>\n","preview":"","inBody":false,"id":4,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":4,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"\nImport the `amp-web-push` component in the header.\n\n"},{"doc_":"\nThe `amp-form` component is being used in this demo, to send a post request so the notification can be prepared and sent.\n\n","code":"<script async custom-element=\"amp-form\" src=\"https://cdn.ampproject.org/v0/amp-form-0.1.js\"></script>\n","preview":"","inBody":false,"id":5,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":4,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"\nThe `amp-form` component is being used in this demo, to send a post request so the notification can be prepared and sent.\n\n"},{"doc_":"","code":"<script async src=\"https://cdn.ampproject.org/v0.js\"></script>\n</head>\n\n<body>\n","preview":"","inBody":false,"id":6,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":4,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":""},{"doc_":"## Basic usage\n","code":"","preview":"","inBody":true,"id":7,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":0,"headings":[{"id":"basic-usage","name":"Basic usage"}],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"## Basic usage\n"},{"doc_":"\nThe `amp-web-push` component requires two additional HTML files as well as an amp-web-push compatible Service Worker. These three files form the configuration described below.\n\n","code":"<amp-web-push id=\"amp-web-push\"\n  layout=\"nodisplay\"\n  helper-iframe-url=\"http://localhost:8080/documentation/examples/components/amp-web-push/amp-web-push-helper-frame.html\"\n  permission-dialog-url=\"http://localhost:8080/documentation/examples/components/amp-web-push/amp-web-push-permission-dialog.html\"\n  service-worker-url=\"http://localhost:8080/documentation/examples/components/amp-web-push/sw.js\"\n  service-worker-scope=\"http://localhost:8080/documentation/examples/components/amp-web-push/\">\n</amp-web-push>\n","preview":"  <amp-web-push id=\"amp-web-push\"\n    layout=\"nodisplay\"\n    helper-iframe-url=\"http://localhost:8080/documentation/examples/components/amp-web-push/amp-web-push-helper-frame.html\"\n    permission-dialog-url=\"http://localhost:8080/documentation/examples/components/amp-web-push/amp-web-push-permission-dialog.html\"\n    service-worker-url=\"http://localhost:8080/documentation/examples/components/amp-web-push/sw.js\"\n    service-worker-scope=\"http://localhost:8080/documentation/examples/components/amp-web-push/\">\n  </amp-web-push>\n","inBody":true,"id":8,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":2,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"\nThe `amp-web-push` component requires two additional HTML files as well as an amp-web-push compatible Service Worker. These three files form the configuration described below.\n\n"},{"doc_":"","code":"\n","preview":"\n","inBody":true,"id":9,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":0,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":""},{"doc_":"Clicking the subscription widget pops up a page prompting the user for notification permissions and signals the service worker (configured below) to subscribe the user to push in the background. On this example, we are intercepting the call to `onMessageReceivedSubscribe`, and storing the subscription object on IndexedDB.\n\n","code":"<amp-web-push-widget visibility=\"unsubscribed\"\n  layout=\"fixed\"\n  width=\"500\"\n  height=\"70\">\n  <button on=\"tap:amp-web-push.subscribe\">Subscribe to Notifications</button>\n</amp-web-push-widget>\n","preview":"  <amp-web-push-widget visibility=\"unsubscribed\"\n    layout=\"fixed\"\n    width=\"500\"\n    height=\"70\">\n    <button on=\"tap:amp-web-push.subscribe\">Subscribe to Notifications</button>\n  </amp-web-push-widget>\n","inBody":true,"id":10,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":2,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"Clicking the subscription widget pops up a page prompting the user for notification permissions and signals the service worker (configured below) to subscribe the user to push in the background. On this example, we are intercepting the call to `onMessageReceivedSubscribe`, and storing the subscription object on IndexedDB.\n \n"},{"doc_":"","code":"\n","preview":"\n","inBody":true,"id":11,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":0,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":""},{"doc_":"Clicking the unsubscription widget signals the worker to unsubscribe the user from push in the background. On this example, we'll be also removing the previoulsy stored subscription object from IndexedDB.\n\n","code":"<amp-web-push-widget visibility=\"subscribed\"\n  layout=\"fixed\"\n  width=\"500\"\n  height=\"180\">\n  <button on=\"tap:amp-web-push.unsubscribe\">Unsubscribe from Notifications</button>\n  <form method=\"post\"\n    action-xhr=\"http://localhost:8080/documentation/examples/components/amp-web-push/send-push\"\n    target=\"_top\">\n    <input type=\"submit\"\n      value=\"Send Web Push\">\n    <div submitting>\n      Sending Push message...\n    </div>\n    <div submit-success>\n      Web Push sent!\n    </div>\n    <div submit-error>\n      Something went wrong.\n    </div>\n  </form>\n</amp-web-push-widget>\n","preview":"  <amp-web-push-widget visibility=\"subscribed\"\n    layout=\"fixed\"\n    width=\"500\"\n    height=\"180\">\n    <button on=\"tap:amp-web-push.unsubscribe\">Unsubscribe from Notifications</button>\n    <form method=\"post\"\n      action-xhr=\"http://localhost:8080/documentation/examples/components/amp-web-push/send-push\"\n      target=\"_top\">\n      <input type=\"submit\"\n        value=\"Send Web Push\">\n      <div submitting>\n        Sending Push message...\n      </div>\n      <div submit-success>\n        Web Push sent!\n      </div>\n      <div submit-error>\n        Something went wrong.\n      </div>\n    </form>\n  </amp-web-push-widget>\n","inBody":true,"id":12,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":2,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"Clicking the unsubscription widget signals the worker to unsubscribe the user from push in the background. On this example, we'll be also removing the previoulsy stored subscription object from IndexedDB.\n \n"},{"doc_":"","code":"<amp-web-push-widget visibility=\"blocked\"\n  layout=\"fixed\"\n  width=\"250\"\n  height=\"80\">\n  Looks like you've blocked notifications!\n</amp-web-push-widget>\n","preview":"  <amp-web-push-widget visibility=\"blocked\"\n    layout=\"fixed\"\n    width=\"250\"\n    height=\"80\">\n    Looks like you've blocked notifications!\n  </amp-web-push-widget>\n","inBody":true,"id":13,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":2,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":""},{"doc_":"","code":"</body>\n\n</html>\n","preview":"","inBody":false,"id":14,"cachedMarkedDoc":false,"isLastSection":true,"isFirstSection":false,"commentOffset":0,"codeOffset":0,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":""}],"head":"    <meta charset=\"utf-8\">\n    <title>amp-web-push</title>\n    <link rel=\"canonical\" href=\"http://localhost:8080/documentation/examples/components/amp-web-push/index.html\">\n    <meta name=\"viewport\" content=\"width=device-width,minimum-scale=1,initial-scale=1\">\n    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript>\n        <style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style>\n    </noscript>\n    <script async custom-element=\"amp-web-push\" src=\"https://cdn.ampproject.org/v0/amp-web-push-0.1.js\"></script>\n    <script async custom-element=\"amp-form\" src=\"https://cdn.ampproject.org/v0/amp-form-0.1.js\"></script>\n    <script async src=\"https://cdn.ampproject.org/v0.js\"></script>\n","styles":"","title":"amp-web-push","metadata":{"hidePreview":true,"preview":"default"},"body":"<body>","elementsAfterBody":"","isAmpStory":false,"isAmpWeb":true,"isAmpAds":false,"isAmpEmail":false,"firstImage":"/favicons/android-chrome-256x256.png","lang":"en","_description":"The amp-web-push component allows users to subscribe to web push notifications."},"route":"/documentation/examples/components/amp-web-push/index.html"}