{"filePath":"examples/source/1.components/amp-install-serviceworker.html","source":"<!--\n  ## Introduction\n\n  The [`amp-install-serviceworker`](/amp-dev/documentation/components/reference/amp-install-serviceworker-v0.1.md) component enables service worker installation via same origin or via the Google AMP Cache.\n\n  [Service workers](https://github.com/slightlyoff/ServiceWorker/blob/master/explainer.md) can run in the background even when the browser is closed, cache required contents in advance of rendering time, send notifications to users, and more.\n\n  This sample installs a service worker which caches this page in the background. You can test this by loading this page while offline once the service worker has been installed.\n\n  Service Workers are currently available in [Chrome, Edge, Firefox, Opera and Safari](https://jakearchibald.github.io/isserviceworkerready/).\n\n  Read on: [Workbox](https://developers.google.com/web/tools/workbox/) is a great library for implementing service workers.\n-->\n<!-- -->\n<!doctype html>\n<html ⚡>\n<head>\n  <meta charset=\"utf-8\">\n  <title>amp-install-serviceworker</title>\n  <script async src=\"https://cdn.ampproject.org/v0.js\"></script>\n  <!-- ## Setup -->\n  <!--\n    Import the amp-install-serviceworker component.\n  -->\n  <script async custom-element=\"amp-install-serviceworker\" src=\"https://cdn.ampproject.org/v0/amp-install-serviceworker-0.1.js\"></script>\n  <link rel=\"canonical\" href=\"http://localhost:8080/documentation/examples/components/amp-install-serviceworker/index.html\">\n  <meta name=\"viewport\" content=\"width=device-width,minimum-scale=1,initial-scale=1\">\n  <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>\n</head>\n<body>\n\n  <!-- ## Installing the service worker -->\n  <!--\n    Calls to `amp-install-serviceworker` can include the `src` and `data-iframe-src` attributes. `src` is the location of the service worker to be installed, and is used when the document is accessed via the same origin as the service worker file. When the document is accessed via the Google AMP Cache, the HTML document noted in the `data-iframe-src` attribute is used to install the service worker. We recommend using both attributes.\n\n    The reason why `amp-install-serviceworker` requires a separate `data-iframe-src` option is because browsers can't install service worker from other domains for security reasons. For details of the security considerations of service worker, [see official specs](https://www.w3.org/TR/service-workers/#security-considerations).\n\n    Tip: If you don't want to provide a special minimal document to install a sevice worker, you can simply link to the AMP document on your own origin.\n  -->\n  <amp-install-serviceworker\n      src=\"/serviceworker.js\"\n      data-iframe-src=\"http://localhost:8080/serviceworker.html\"\n      layout=\"nodisplay\">\n  </amp-install-serviceworker>\n  <!--\n  In this sample, when users access this AMP page for the second time, the service worker is installed and caches all image files and video files under the root path of this domain.\n\n  Confirm that the service worker is installed and works as expected by following the following steps:\n  1. Access [amp-install-serviceworker](/components/amp-install-serviceworker) twice.\n  2. Open Chrome Dev Tools and navigate to the \"Resources\" tab (or \"Application\" tab on newer versions of Chrome). In the \"Service Workers\" section you can see that `/sw.js` is installed.\n  3. Then open the \"Cached Storage\" section. It shows all cached images and videos.\n  4. Disable your network connection and reload this page. It still works! In the \"Network\" tab in Dev Tools, you'll see which resources are cached by the service worker.\n  -->\n\n</body>\n</html>","document":{"sections":[{"doc_":"","code":"\n","preview":"","inBody":false,"id":0,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":true,"commentOffset":0,"codeOffset":0,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":""},{"doc_":"\n## Introduction\n\nThe [`amp-install-serviceworker`](/amp-dev/documentation/components/reference/amp-install-serviceworker-v0.1.md) component enables service worker installation via same origin or via the Google AMP Cache.\n\n[Service workers](https://github.com/slightlyoff/ServiceWorker/blob/master/explainer.md) can run in the background even when the browser is closed, cache required contents in advance of rendering time, send notifications to users, and more.\n\nThis sample installs a service worker which caches this page in the background. You can test this by loading this page while offline once the service worker has been installed.\n\nService Workers are currently available in [Chrome, Edge, Firefox, Opera and Safari](https://jakearchibald.github.io/isserviceworkerready/).\n\nRead on: [Workbox](https://developers.google.com/web/tools/workbox/) is a great library for implementing service workers.\n\n","code":"","preview":"","inBody":false,"id":1,"cachedMarkedDoc":"<h2 id=\"introduction\" class=\"www-heading pb4 mb2 relative h3\">Introduction</h2><p class=\"mb2 px1\">The <a href=\"/amp-dev/documentation/components/reference/amp-install-serviceworker-v0.1.md\"><code>amp-install-serviceworker</code></a> component enables service worker installation via same origin or via the Google AMP Cache.</p><p class=\"mb2 px1\"><a href=\"https://github.com/slightlyoff/ServiceWorker/blob/master/explainer.md\">Service workers</a> can run in the background even when the browser is closed, cache required contents in advance of rendering time, send notifications to users, and more.</p><p class=\"mb2 px1\">This sample installs a service worker which caches this page in the background. You can test this by loading this page while offline once the service worker has been installed.</p><p class=\"mb2 px1\">Service Workers are currently available in <a href=\"https://jakearchibald.github.io/isserviceworkerready/\">Chrome, Edge, Firefox, Opera and Safari</a>.</p><p class=\"mb2 px1\">Read on: <a href=\"https://developers.google.com/web/tools/workbox/\">Workbox</a> is a great library for implementing service workers.</p>","isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":0,"headings":[{"id":"introduction","name":"Introduction"}],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"\n## Introduction\n\nThe [`amp-install-serviceworker`](/amp-dev/documentation/components/reference/amp-install-serviceworker-v0.1.md) component enables service worker installation via same origin or via the Google AMP Cache.\n\n[Service workers](https://github.com/slightlyoff/ServiceWorker/blob/master/explainer.md) can run in the background even when the browser is closed, cache required contents in advance of rendering time, send notifications to users, and more.\n\nThis sample installs a service worker which caches this page in the background. You can test this by loading this page while offline once the service worker has been installed.\n\nService Workers are currently available in [Chrome, Edge, Firefox, Opera and Safari](https://jakearchibald.github.io/isserviceworkerready/).\n\nRead on: [Workbox](https://developers.google.com/web/tools/workbox/) is a great library for implementing service workers.\n\n"},{"doc_":"\n","code":"<!doctype html>\n<html ⚡>\n<head>\n  <meta charset=\"utf-8\">\n  <title>amp-install-serviceworker</title>\n  <script async src=\"https://cdn.ampproject.org/v0.js\"></script>\n","preview":"","inBody":false,"id":2,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":0,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":" \n"},{"doc_":"## Setup\n","code":"","preview":"","inBody":false,"id":3,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":0,"headings":[{"id":"setup","name":"Setup"}],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"## Setup\n"},{"doc_":"\nImport the amp-install-serviceworker component.\n\n","code":"<script async custom-element=\"amp-install-serviceworker\" src=\"https://cdn.ampproject.org/v0/amp-install-serviceworker-0.1.js\"></script>\n","preview":"","inBody":false,"id":4,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":2,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"\nImport the amp-install-serviceworker component.\n\n"},{"doc_":"","code":"<link rel=\"canonical\" href=\"http://localhost:8080/documentation/examples/components/amp-install-serviceworker/index.html\">\n<meta name=\"viewport\" content=\"width=device-width,minimum-scale=1,initial-scale=1\">\n<style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>\n</head>\n<body>\n\n","preview":"\n","inBody":false,"id":5,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":2,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":""},{"doc_":"## Installing the service worker\n","code":"","preview":"","inBody":true,"id":6,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":0,"headings":[{"id":"installing-the-service-worker","name":"Installing the service worker"}],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"## Installing the service worker\n"},{"doc_":"\nCalls to `amp-install-serviceworker` can include the `src` and `data-iframe-src` attributes. `src` is the location of the service worker to be installed, and is used when the document is accessed via the same origin as the service worker file. When the document is accessed via the Google AMP Cache, the HTML document noted in the `data-iframe-src` attribute is used to install the service worker. We recommend using both attributes.\n\nThe reason why `amp-install-serviceworker` requires a separate `data-iframe-src` option is because browsers can't install service worker from other domains for security reasons. For details of the security considerations of service worker, [see official specs](https://www.w3.org/TR/service-workers/#security-considerations).\n\nTip: If you don't want to provide a special minimal document to install a sevice worker, you can simply link to the AMP document on your own origin.\n\n","code":"<amp-install-serviceworker src=\"/serviceworker.js\"\n  data-iframe-src=\"http://localhost:8080/serviceworker.html\"\n  layout=\"nodisplay\">\n</amp-install-serviceworker>\n","preview":"  <amp-install-serviceworker src=\"/serviceworker.js\"\n    data-iframe-src=\"http://localhost:8080/serviceworker.html\"\n    layout=\"nodisplay\">\n  </amp-install-serviceworker>\n","inBody":true,"id":7,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":2,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"\nCalls to `amp-install-serviceworker` can include the `src` and `data-iframe-src` attributes. `src` is the location of the service worker to be installed, and is used when the document is accessed via the same origin as the service worker file. When the document is accessed via the Google AMP Cache, the HTML document noted in the `data-iframe-src` attribute is used to install the service worker. We recommend using both attributes.\n\nThe reason why `amp-install-serviceworker` requires a separate `data-iframe-src` option is because browsers can't install service worker from other domains for security reasons. For details of the security considerations of service worker, [see official specs](https://www.w3.org/TR/service-workers/#security-considerations).\n\nTip: If you don't want to provide a special minimal document to install a sevice worker, you can simply link to the AMP document on your own origin.\n\n"},{"doc_":"\nIn this sample, when users access this AMP page for the second time, the service worker is installed and caches all image files and video files under the root path of this domain.\n\nConfirm that the service worker is installed and works as expected by following the following steps:\n1. Access [amp-install-serviceworker](/components/amp-install-serviceworker) twice.\n2. Open Chrome Dev Tools and navigate to the \"Resources\" tab (or \"Application\" tab on newer versions of Chrome). In the \"Service Workers\" section you can see that `/sw.js` is installed.\n3. Then open the \"Cached Storage\" section. It shows all cached images and videos.\n4. Disable your network connection and reload this page. It still works! In the \"Network\" tab in Dev Tools, you'll see which resources are cached by the service worker.\n\n","code":"\n","preview":"\n","inBody":true,"id":8,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":0,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"\nIn this sample, when users access this AMP page for the second time, the service worker is installed and caches all image files and video files under the root path of this domain.\n\nConfirm that the service worker is installed and works as expected by following the following steps:\n1. Access [amp-install-serviceworker](/components/amp-install-serviceworker) twice.\n2. Open Chrome Dev Tools and navigate to the \"Resources\" tab (or \"Application\" tab on newer versions of Chrome). In the \"Service Workers\" section you can see that `/sw.js` is installed.\n3. Then open the \"Cached Storage\" section. It shows all cached images and videos.\n4. Disable your network connection and reload this page. It still works! In the \"Network\" tab in Dev Tools, you'll see which resources are cached by the service worker.\n\n"},{"doc_":"","code":"</body>\n</html>\n","preview":"","inBody":false,"id":9,"cachedMarkedDoc":false,"isLastSection":true,"isFirstSection":false,"commentOffset":0,"codeOffset":0,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":""}],"head":"  <meta charset=\"utf-8\">\n  <title>amp-install-serviceworker</title>\n  <script async src=\"https://cdn.ampproject.org/v0.js\"></script>\n  <script async custom-element=\"amp-install-serviceworker\" src=\"https://cdn.ampproject.org/v0/amp-install-serviceworker-0.1.js\"></script>\n  <link rel=\"canonical\" href=\"http://localhost:8080/documentation/examples/components/amp-install-serviceworker/index.html\">\n  <meta name=\"viewport\" content=\"width=device-width,minimum-scale=1,initial-scale=1\">\n  <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>\n","styles":"","title":"amp-install-serviceworker","metadata":{"hidePreview":true,"author":"ymotongpoo"},"body":"<body>","elementsAfterBody":"","isAmpStory":false,"isAmpWeb":true,"isAmpAds":false,"isAmpEmail":false,"firstImage":"/favicons/android-chrome-256x256.png","lang":"en","_description":"The amp-install-serviceworker component enables service worker installation via same origin or via the Google AMP Cache."},"route":"/documentation/examples/components/amp-install-serviceworker/index.html"}