{"filePath":"examples/source/1.components/amp-analytics/embed.html","source":"<!doctype html>\n<html>\n<head>\n<meta charset=\"utf-8\">\n    <style media=\"screen\" type=\"text/css\">\n      body {\n        background: white;\n        font-family: 'Noto Sans', sans-serif;\n        font-size: 14px;\n        font-weight: 400;\n        letter-spacing: 0;\n      }\n      th { \n        text-align: left;\n      }\n    </style>\n  </head>\n  <body>\n    <script>\n      function getQueryParams(qs) {\n          qs = qs.split('+').join(' ');\n          var params = {},\n              tokens,\n              re = /[?&]?([^=]+)=([^&]*)/g;\n          while (tokens = re.exec(qs)) {\n              params[decodeURIComponent(tokens[1])] = decodeURIComponent(tokens[2]);\n          }\n          return params;\n      }\n\n      function updateTimestamp() {\n        var now = new Date();\n        document.getElementById(\"timestamp\").textContent = now.toLocaleTimeString();\n      }\n\n      function updateAnalyticsData(newData) {\n        var el = document.createElement('div');\n        var att = document.createAttribute(\"id\");\n        att.value = \"data\";          \n        el.setAttributeNode(att);\n        el.innerHTML = newData;\n        var data = document.getElementById(\"data\");\n        var parentDiv = data.parentNode;\n        parentDiv.replaceChild(el, data);\n      }\n\n      if (!!window.EventSource) {\n        var query = getQueryParams(document.location.search);\n        var account = query.account;\n        var user = query.user;\n        var source = new EventSource('https://amp.dev/documentation/examples/components/amp-analytics/embed/listen?account=' + account + '&user=' + user);\n        source.onmessage = function(e) {\n          updateAnalyticsData(e.data);\n          updateTimestamp();\n        };\n      }\n    </script>\n    <div id=\"data\">No data</div>\n    <p>Last updated: <span id=\"timestamp\">n/a</span></p>\n</body></html>","document":{"sections":[{"doc_":"","code":"<!doctype html>\n<html>\n<head>\n<meta charset=\"utf-8\">\n    <style media=\"screen\" type=\"text/css\">\n      body {\n        background: white;\n        font-family: 'Noto Sans', sans-serif;\n        font-size: 14px;\n        font-weight: 400;\n        letter-spacing: 0;\n      }\n      th { \n        text-align: left;\n      }\n    </style>\n  </head>\n<body>\n  <script>\n    function getQueryParams(qs) {\n      qs = qs.split('+').join(' ');\n      var params = {},\n        tokens,\n        re = /[?&]?([^=]+)=([^&]*)/g;\n      while (tokens = re.exec(qs)) {\n        params[decodeURIComponent(tokens[1])] = decodeURIComponent(tokens[2]);\n      }\n      return params;\n    }\n\n    function updateTimestamp() {\n      var now = new Date();\n      document.getElementById(\"timestamp\").textContent = now.toLocaleTimeString();\n    }\n\n    function updateAnalyticsData(newData) {\n      var el = document.createElement('div');\n      var att = document.createAttribute(\"id\");\n      att.value = \"data\";\n      el.setAttributeNode(att);\n      el.innerHTML = newData;\n      var data = document.getElementById(\"data\");\n      var parentDiv = data.parentNode;\n      parentDiv.replaceChild(el, data);\n    }\n\n    if (!!window.EventSource) {\n      var query = getQueryParams(document.location.search);\n      var account = query.account;\n      var user = query.user;\n      var source = new EventSource('https://amp.dev/documentation/examples/components/amp-analytics/embed/listen?account=' + account + '&user=' + user);\n      source.onmessage = function(e) {\n        updateAnalyticsData(e.data);\n        updateTimestamp();\n      };\n    }\n  </script>\n  <div id=\"data\">No data</div>\n  <p>Last updated: <span id=\"timestamp\">n/a</span></p>\n","preview":"  <script>\n    function getQueryParams(qs) {\n      qs = qs.split('+').join(' ');\n      var params = {},\n        tokens,\n        re = /[?&]?([^=]+)=([^&]*)/g;\n      while (tokens = re.exec(qs)) {\n        params[decodeURIComponent(tokens[1])] = decodeURIComponent(tokens[2]);\n      }\n      return params;\n    }\n\n    function updateTimestamp() {\n      var now = new Date();\n      document.getElementById(\"timestamp\").textContent = now.toLocaleTimeString();\n    }\n\n    function updateAnalyticsData(newData) {\n      var el = document.createElement('div');\n      var att = document.createAttribute(\"id\");\n      att.value = \"data\";\n      el.setAttributeNode(att);\n      el.innerHTML = newData;\n      var data = document.getElementById(\"data\");\n      var parentDiv = data.parentNode;\n      parentDiv.replaceChild(el, data);\n    }\n\n    if (!!window.EventSource) {\n      var query = getQueryParams(document.location.search);\n      var account = query.account;\n      var user = query.user;\n      var source = new EventSource('https://amp.dev/documentation/examples/components/amp-analytics/embed/listen?account=' + account + '&user=' + user);\n      source.onmessage = function(e) {\n        updateAnalyticsData(e.data);\n        updateTimestamp();\n      };\n    }\n  </script>\n  <div id=\"data\">No data</div>\n  <p>Last updated: <span id=\"timestamp\">n/a</span></p>\n","inBody":false,"id":0,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":true,"commentOffset":0,"codeOffset":0,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":""},{"doc_":"","code":"</body>\n</html>\n","preview":"","inBody":false,"id":1,"cachedMarkedDoc":false,"isLastSection":true,"isFirstSection":false,"commentOffset":0,"codeOffset":0,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":""}],"head":"<meta charset=\"utf-8\">\n    <style media=\"screen\" type=\"text/css\">\n      body {\n        background: white;\n        font-family: 'Noto Sans', sans-serif;\n        font-size: 14px;\n        font-weight: 400;\n        letter-spacing: 0;\n      }\n      th { \n        text-align: left;\n      }\n    </style>\n","styles":"","title":"embed","metadata":{},"body":"<body>","elementsAfterBody":"","isAmpStory":false,"isAmpWeb":true,"isAmpAds":false,"isAmpEmail":false,"firstImage":"/favicons/android-chrome-256x256.png","lang":"en"},"route":"/documentation/examples/components/embed/index.html"}