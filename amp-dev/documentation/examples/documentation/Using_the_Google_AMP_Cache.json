{"filePath":"examples/source/2.guides/Using_the_Google_AMP_Cache.html","source":"<!--\n  ## Introduction\n\n  The [Google AMP Cache](https://developers.google.com/amp/cache/overview) stores valid AMPs and provides a consistently fast access to AMPs. It is available for anyone to use.\n-->\n<!-- -->\n<!doctype html>\n<html ⚡>\n<head>\n  <meta charset=\"utf-8\">\n  <title>Using the Google AMP Cache</title>\n  <script async src=\"https://cdn.ampproject.org/v0.js\"></script>\n  <link rel=\"canonical\" href=\"http://localhost:8080/documentation/examples/guides/using_the_google_amp_cache/index.html\">\n  <meta name=\"viewport\" content=\"width=device-width,minimum-scale=1,initial-scale=1\">\n  <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>\n</head>\n<body>\n  <!--\n## AMP Cache URL Format\n\nWhen possible, the Google AMP Cache will create a subdomain for each AMP document's domain by first converting it from [IDN (punycode)](https://en.wikipedia.org/wiki/Punycode) to UTF-8. The caches replaces every `-` (dash) with `--` (2 dashes) and replace every `.` (dot) with `-` (dash). For example, `pub.com` will map to `pub-com.cdn.ampproject.org`.\n\nHere is AMP Cache URL for `https://amp.dev/about/websites/`:\n\n{% do doc.amp_dependencies.add('amp-iframe', '0.1') %}\n<div>\n<amp-iframe title=\"Google AMP Cache tool\" height=\"105\" layout=\"fixed-height\" sandbox=\"allow-scripts allow-popups\" src=\"/static/samples/files/amp-url-converter.html?url=https://amp.dev/about/websites/\">\n<div placeholder></div>\n</amp-iframe>\n</div>\n\nThe converted AMP Cache URL consists of the following parts:\n\n* `amp-dev`: the publisher domain converted into a subdomain using the algorithm described above.</li>\n* `cdn.ampproject.org`: the AMP Cache domain.\n* `c`: to indicate that it's an AMP document (there is also `i` for image and `r` for resources such as fonts).\n* `s`: indicating that the AMP Cache fetches the content from the origin using TLS (secure HTTPS).\n* `amp.dev/examples/components/amp-img`: the original URL excluding the scheme.\n\nIt is OK for URLs to include parameters in the query string, simply include these in the AMP Cache URL as well.\n\nExample: [https://amp-dev.cdn.ampproject.org/c/s/amp.dev/documentation/examples/api/query?value=Hello%20World](https://amp-dev.cdn.ampproject.org/c/s/amp.dev/documentation/examples/api/query?value=Hello%20World).\n\n## Cache updates\n\nThe AMP Cache uses a [one-behind caching model](https://developers.google.com/amp/cache/overview#google-amp-cache-updates) which can be controlled by the [`max-age` cache directive](https://developer.mozilla.org/de/docs/Web/HTTP/Headers/Cache-Control). You can test the behavior with this sample page, which will prints the current date at serving time:\n\nMax-age 15s: [https://amp-dev.cdn.ampproject.org/c/s/amp.dev/documentation/examples/api/query?maxage=15](https://amp-dev.cdn.ampproject.org/c/s/amp.dev/documentation/examples/api/query?maxage=15).\n\n## Redirect & Error Handling\n\nHere are some examples for how the AMP Cache handles redirects and errors:\n\n**Redirects**\n\nThe AMP Cache follows redirects when resolving AMP URLs. For example, if an URL redirects to another AMP URL:\n\n```\n$ curl -I https://ampbyexample.com/components/amp-img/\n\nHTTP/1.1 301 Moved Permanently\nContent-Type: text/html; charset=utf-8\nLocation: https://amp.dev/documentation/examples/components/amp-img/\n...\n```\n\nThen the AMP Cache will return the content of the resolved redirect for the original URL.\n\nExample: [https://amp-dev.cdn.ampproject.org/c/s/ampbyexample.com/components/amp-img/](https://cdn.ampproject.org/c/s/ampbyexample.com/components/amp-img/).\n\nImportant: If you move the location of the AMP Files on your server, make sure to set up a redirect from the old location to the new one.\n\n**Not Found**\n\nWhen a page is not found in the AMP Cache, it will show an error page and return a 404 status.\n\nExample: [https://amp-dev.cdn.ampproject.org/amp.dev/not-found](https://cdn.ampproject.org/c/s/amp.dev/not-found)\n\n**Invalid AMP**\n\nWhen a page is invalid AMP, the AMP Cache will return a 404 status.</p>\n\nExample: [https://amp-dev.cdn.ampproject.org/amp.dev/static/samples/files/invalid_amp.html](https://cdn.ampproject.org/c/s/amp.dev/static/samples/files/invalid_amp.html)\n\n**Server Errors**\n\nIf an URL returns a 5XX server errors, the AMP Cache will return a 404 status.</p>\n\nExample: [https://amp-dev.cdn.ampproject.org/amp.dev/documentation/examples/api/error](https://cdn.ampproject.org/c/s/amp.dev/documentation/examples/api/error)\n\n-->\n</body>\n</html>","document":{"sections":[{"doc_":"","code":"\n","preview":"","inBody":false,"id":0,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":true,"commentOffset":0,"codeOffset":0,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":""},{"doc_":"\n## Introduction\n\nThe [Google AMP Cache](https://developers.google.com/amp/cache/overview) stores valid AMPs and provides a consistently fast access to AMPs. It is available for anyone to use.\n\n","code":"","preview":"","inBody":false,"id":1,"cachedMarkedDoc":"<h2 id=\"introduction\" class=\"www-heading pb4 mb2 relative h3\">Introduction</h2><p class=\"mb2 px1\">The <a href=\"https://developers.google.com/amp/cache/overview\">Google AMP Cache</a> stores valid AMPs and provides a consistently fast access to AMPs. It is available for anyone to use.</p>","isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":0,"headings":[{"id":"introduction","name":"Introduction"}],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"\n## Introduction\n\nThe [Google AMP Cache](https://developers.google.com/amp/cache/overview) stores valid AMPs and provides a consistently fast access to AMPs. It is available for anyone to use.\n\n"},{"doc_":"\n","code":"<!doctype html>\n<html ⚡>\n<head>\n  <meta charset=\"utf-8\">\n  <title>Using the Google AMP Cache</title>\n  <script async src=\"https://cdn.ampproject.org/v0.js\"></script>\n  <link rel=\"canonical\" href=\"http://localhost:8080/documentation/examples/guides/using_the_google_amp_cache/index.html\">\n  <meta name=\"viewport\" content=\"width=device-width,minimum-scale=1,initial-scale=1\">\n  <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>\n</head>\n<body>\n","preview":"","inBody":false,"id":2,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":0,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":" \n"},{"doc_":"\n## AMP Cache URL Format\n\nWhen possible, the Google AMP Cache will create a subdomain for each AMP document's domain by first converting it from [IDN (punycode)](https://en.wikipedia.org/wiki/Punycode) to UTF-8. The caches replaces every `-` (dash) with `--` (2 dashes) and replace every `.` (dot) with `-` (dash). For example, `pub.com` will map to `pub-com.cdn.ampproject.org`.\n\nHere is AMP Cache URL for `https://amp.dev/about/websites/`:\n\n{% do doc.amp_dependencies.add('amp-iframe', '0.1') %}\n<div>\n<amp-iframe title=\"Google AMP Cache tool\" height=\"105\" layout=\"fixed-height\" sandbox=\"allow-scripts allow-popups\" src=\"/static/samples/files/amp-url-converter.html?url=https://amp.dev/about/websites/\">\n<div placeholder></div>\n</amp-iframe>\n</div>\n\nThe converted AMP Cache URL consists of the following parts:\n\n* `amp-dev`: the publisher domain converted into a subdomain using the algorithm described above.</li>\n* `cdn.ampproject.org`: the AMP Cache domain.\n* `c`: to indicate that it's an AMP document (there is also `i` for image and `r` for resources such as fonts).\n* `s`: indicating that the AMP Cache fetches the content from the origin using TLS (secure HTTPS).\n* `amp.dev/examples/components/amp-img`: the original URL excluding the scheme.\n\nIt is OK for URLs to include parameters in the query string, simply include these in the AMP Cache URL as well.\n\nExample: [https://amp-dev.cdn.ampproject.org/c/s/amp.dev/documentation/examples/api/query?value=Hello%20World](https://amp-dev.cdn.ampproject.org/c/s/amp.dev/documentation/examples/api/query?value=Hello%20World).\n\n## Cache updates\n\nThe AMP Cache uses a [one-behind caching model](https://developers.google.com/amp/cache/overview#google-amp-cache-updates) which can be controlled by the [`max-age` cache directive](https://developer.mozilla.org/de/docs/Web/HTTP/Headers/Cache-Control). You can test the behavior with this sample page, which will prints the current date at serving time:\n\nMax-age 15s: [https://amp-dev.cdn.ampproject.org/c/s/amp.dev/documentation/examples/api/query?maxage=15](https://amp-dev.cdn.ampproject.org/c/s/amp.dev/documentation/examples/api/query?maxage=15).\n\n## Redirect & Error Handling\n\nHere are some examples for how the AMP Cache handles redirects and errors:\n\n**Redirects**\n\nThe AMP Cache follows redirects when resolving AMP URLs. For example, if an URL redirects to another AMP URL:\n\n[sourcecode:none]\n$ curl -I https://ampbyexample.com/components/amp-img/\n\nHTTP/1.1 301 Moved Permanently\nContent-Type: text/html; charset=utf-8\nLocation: https://amp.dev/documentation/examples/components/amp-img/\n...\n[/sourcecode]\n\nThen the AMP Cache will return the content of the resolved redirect for the original URL.\n\nExample: [https://amp-dev.cdn.ampproject.org/c/s/ampbyexample.com/components/amp-img/](https://cdn.ampproject.org/c/s/ampbyexample.com/components/amp-img/).\n\nImportant: If you move the location of the AMP Files on your server, make sure to set up a redirect from the old location to the new one.\n\n**Not Found**\n\nWhen a page is not found in the AMP Cache, it will show an error page and return a 404 status.\n\nExample: [https://amp-dev.cdn.ampproject.org/amp.dev/not-found](https://cdn.ampproject.org/c/s/amp.dev/not-found)\n\n**Invalid AMP**\n\nWhen a page is invalid AMP, the AMP Cache will return a 404 status.</p>\n\nExample: [https://amp-dev.cdn.ampproject.org/amp.dev/static/samples/files/invalid_amp.html](https://cdn.ampproject.org/c/s/amp.dev/static/samples/files/invalid_amp.html)\n\n**Server Errors**\n\nIf an URL returns a 5XX server errors, the AMP Cache will return a 404 status.</p>\n\nExample: [https://amp-dev.cdn.ampproject.org/amp.dev/documentation/examples/api/error](https://cdn.ampproject.org/c/s/amp.dev/documentation/examples/api/error)\n\n","code":"","preview":"","inBody":true,"id":3,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":0,"headings":[{"id":"amp-cache-url-format","name":"AMP Cache URL Format"},{"id":"cache-updates","name":"Cache updates"},{"id":"redirect-&-error-handling","name":"Redirect & Error Handling"}],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"  \n## AMP Cache URL Format\n\nWhen possible, the Google AMP Cache will create a subdomain for each AMP document's domain by first converting it from [IDN (punycode)](https://en.wikipedia.org/wiki/Punycode) to UTF-8. The caches replaces every `-` (dash) with `--` (2 dashes) and replace every `.` (dot) with `-` (dash). For example, `pub.com` will map to `pub-com.cdn.ampproject.org`.\n\nHere is AMP Cache URL for `https://amp.dev/about/websites/`:\n\n{% do doc.amp_dependencies.add('amp-iframe', '0.1') %}\n<div>\n<amp-iframe title=\"Google AMP Cache tool\" height=\"105\" layout=\"fixed-height\" sandbox=\"allow-scripts allow-popups\" src=\"/static/samples/files/amp-url-converter.html?url=https://amp.dev/about/websites/\">\n<div placeholder></div>\n</amp-iframe>\n</div>\n\nThe converted AMP Cache URL consists of the following parts:\n\n* `amp-dev`: the publisher domain converted into a subdomain using the algorithm described above.</li>\n* `cdn.ampproject.org`: the AMP Cache domain.\n* `c`: to indicate that it's an AMP document (there is also `i` for image and `r` for resources such as fonts).\n* `s`: indicating that the AMP Cache fetches the content from the origin using TLS (secure HTTPS).\n* `amp.dev/examples/components/amp-img`: the original URL excluding the scheme.\n\nIt is OK for URLs to include parameters in the query string, simply include these in the AMP Cache URL as well.\n\nExample: [https://amp-dev.cdn.ampproject.org/c/s/amp.dev/documentation/examples/api/query?value=Hello%20World](https://amp-dev.cdn.ampproject.org/c/s/amp.dev/documentation/examples/api/query?value=Hello%20World).\n\n## Cache updates\n\nThe AMP Cache uses a [one-behind caching model](https://developers.google.com/amp/cache/overview#google-amp-cache-updates) which can be controlled by the [`max-age` cache directive](https://developer.mozilla.org/de/docs/Web/HTTP/Headers/Cache-Control). You can test the behavior with this sample page, which will prints the current date at serving time:\n\nMax-age 15s: [https://amp-dev.cdn.ampproject.org/c/s/amp.dev/documentation/examples/api/query?maxage=15](https://amp-dev.cdn.ampproject.org/c/s/amp.dev/documentation/examples/api/query?maxage=15).\n\n## Redirect & Error Handling\n\nHere are some examples for how the AMP Cache handles redirects and errors:\n\n**Redirects**\n\nThe AMP Cache follows redirects when resolving AMP URLs. For example, if an URL redirects to another AMP URL:\n\n```\n$ curl -I https://ampbyexample.com/components/amp-img/\n\nHTTP/1.1 301 Moved Permanently\nContent-Type: text/html; charset=utf-8\nLocation: https://amp.dev/documentation/examples/components/amp-img/\n...\n```\n\nThen the AMP Cache will return the content of the resolved redirect for the original URL.\n\nExample: [https://amp-dev.cdn.ampproject.org/c/s/ampbyexample.com/components/amp-img/](https://cdn.ampproject.org/c/s/ampbyexample.com/components/amp-img/).\n\nImportant: If you move the location of the AMP Files on your server, make sure to set up a redirect from the old location to the new one.\n\n**Not Found**\n\nWhen a page is not found in the AMP Cache, it will show an error page and return a 404 status.\n\nExample: [https://amp-dev.cdn.ampproject.org/amp.dev/not-found](https://cdn.ampproject.org/c/s/amp.dev/not-found)\n\n**Invalid AMP**\n\nWhen a page is invalid AMP, the AMP Cache will return a 404 status.</p>\n\nExample: [https://amp-dev.cdn.ampproject.org/amp.dev/static/samples/files/invalid_amp.html](https://cdn.ampproject.org/c/s/amp.dev/static/samples/files/invalid_amp.html)\n\n**Server Errors**\n\nIf an URL returns a 5XX server errors, the AMP Cache will return a 404 status.</p>\n\nExample: [https://amp-dev.cdn.ampproject.org/amp.dev/documentation/examples/api/error](https://cdn.ampproject.org/c/s/amp.dev/documentation/examples/api/error)\n\n\n"},{"doc_":"","code":"</body>\n</html>\n","preview":"","inBody":false,"id":4,"cachedMarkedDoc":false,"isLastSection":true,"isFirstSection":false,"commentOffset":0,"codeOffset":0,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":""}],"head":"  <meta charset=\"utf-8\">\n  <title>Using the Google AMP Cache</title>\n  <script async src=\"https://cdn.ampproject.org/v0.js\"></script>\n  <link rel=\"canonical\" href=\"http://localhost:8080/documentation/examples/guides/using_the_google_amp_cache/index.html\">\n  <meta name=\"viewport\" content=\"width=device-width,minimum-scale=1,initial-scale=1\">\n  <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>\n","styles":"","title":"Using the Google AMP Cache","metadata":{"hideCode":true,"disablePlayground":true,"hidePreview":true,"author":"kul3r4"},"body":"<body>","elementsAfterBody":"","isAmpStory":false,"isAmpWeb":true,"isAmpAds":false,"isAmpEmail":false,"firstImage":"/favicons/android-chrome-256x256.png","lang":"en","_description":"The Google AMP Cache stores valid AMPs and provides a consistently fast access to AMPs."},"route":"/documentation/examples/guides/using_the_google_amp_cache/index.html"}