{"filePath":"examples/source/interactivity-dynamic-content/Poll/index.html","source":"<!--\n    ## Introduction\n\n    This is a sample template for a poll in AMP. After selecting one of the answers, you will see the percentage of chosen answers.\n\n  --><!-- -->\n<!doctype html>\n<html ⚡>\n<head>\n<meta charset=\"utf-8\">\n      <title>Poll</title>\n      <script async src=\"https://cdn.ampproject.org/v0.js\"></script>\n      <!-- ## Setup -->\n      <!--\n        Import the additional AMP components. This sample uses `amp-form` to accept poll responses.\n      -->\n      <script async custom-element=\"amp-form\" src=\"https://cdn.ampproject.org/v0/amp-form-0.1.js\"></script>\n      <!--\n        This sample uses mustache templates to format poll results\n      -->\n      <script async custom-template=\"amp-mustache\" src=\"https://cdn.ampproject.org/v0/amp-mustache-0.2.js\"></script>\n      <link rel=\"canonical\" href=\"http://localhost:8080/documentation/examples/interactivity-dynamic-content/poll/index.html\">\n      <meta name=\"viewport\" content=\"width=device-width,minimum-scale=1,initial-scale=1\">\n      <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>\n\n        <style amp-custom>\n:root {\n  --color-primary: #005AF0;\n  --space-1: .5rem;  /* 8px */\n  --space-2: 1rem;   /* 16px */\n}\n  #sample-poll {\n    padding: var(--space-2);\n    display: flex;\n    flex-direction: column;\n  }\n  #sample-poll > * {\n    margin-bottom: var(--space-2);\n  }\n  #sample-poll label {\n    display: flex;\n    width: 150px;\n    justify-content: space-between;\n  }\n  #sample-poll.amp-form-submit-success label {\n    display: none;\n  }\n  .one-pc-fixed {\n    width: 2px;\n    display: inline-block;\n    background: var(--color-primary);\n    height: var(--space-2);\n    float: left;\n  }\n        </style>\n    </head>\n    <body>\n\n      <!-- ## Poll -->\n      <!--\n        We use `amp-form` to implement a poll. To avoid multiple votes by the same user, we need to identify which users have already voted. We use a cookie called `POLL_USER_ID` to identify the user. Given that in Safari the default behavior is to block third-party cookies from sites that have not been previously visited, this approach may not work if the page is visited via the AMP Cache. In this case we fallback to checking for duplicate entries via the `CLIENT_ID`.\n\n        The `CLIENT_ID` is a unique identifier for the user when accessing a specific origin, for example the original page or the cached version of it. This means that the same user will generate two different values when accessing different origins. That's why we use a custom cookie to track cross origin access to the poll page.\n\nRead more about [variable substitution](/amp-dev/documentation/components/reference/amp-form.md#variable-substitutions). Currently, HTML tables are not supported in form responses, so we'll use CSS to layout the result data.\n\n        Read more about [variable substitution](/amp-dev/documentation/components/reference/amp-form.md#variable-substitutions).\n\n        In order to submit the form as soon as the user picks an option, we will add an\n        [`on` attribute](/documentation/guides-and-tutorials/learn/amp-actions-and-events.html?format=websites#input-elements) to each `<input>`, that will submit the poll on change.\n      -->\n      <form id=\"sample-poll\" method=\"post\" action-xhr=\"http://localhost:8080/documentation/examples/interactivity-dynamic-content/poll/submit-poll\" target=\"_blank\">\n            <input name=\"clientId\" type=\"hidden\" value=\"CLIENT_ID(POLL_USER_ID)\" data-amp-replace=\"CLIENT_ID\">\n            <h3>What is your favorite flightless bird?</h3>\n            <p>Choose your favourite flightless bird and you will discover what other users have chosen.\n            If you have already voted, your answer will be overwritten.</p>\n            <label>Penguins <input type=\"radio\" value=\"0\" name=\"answer\" on=\"change:sample-poll.submit\"></label>\n            <label>Ostriches <input type=\"radio\" value=\"1\" name=\"answer\" on=\"change:sample-poll.submit\"></label>\n            <label>Kiwis <input type=\"radio\" value=\"2\" name=\"answer\" on=\"change:sample-poll.submit\"></label>\n            <label>Wekas <input type=\"radio\" value=\"3\" name=\"answer\" on=\"change:sample-poll.submit\"></label>\n            <div submit-success>\n              <script type=\"text/plain\" template=\"amp-mustache\">\n                <p>{{Message}}</p>\n                <p>Here are the results:</p>\n                <table>\n                  {{#PollEntryResults}}\n                  <tr>\n                    <td>\n                      {{Answer}}\n                    </td>\n                    <td>\n                      {{Percentage.length}}%\n                    </td>\n                    <td>\n                      {{Votes}}\n                    </td>\n                    <td>\n                      {{#Percentage}}<span class=\"one-pc-fixed\"></span>{{/Percentage}}\n                    </td>\n                  </tr>\n                  {{/PollEntryResults}}\n                </table>\n              </script>\n            </div>\n            <div submit-error>\n              Error! Looks like something went wrong with your vote, please try to submit it again. {{error}}\n            </div>\n      </form>\n</body></html>","document":{"sections":[{"doc_":"\n## Introduction\n\nThis is a sample template for a poll in AMP. After selecting one of the answers, you will see the percentage of chosen answers.\n\n","code":"","preview":"","inBody":false,"id":0,"cachedMarkedDoc":"<h2 id=\"introduction\" class=\"www-heading pb4 mb2 relative h3\">Introduction</h2><p class=\"mb2 px1\">This is a sample template for a poll in AMP. After selecting one of the answers, you will see the percentage of chosen answers.</p>","isLastSection":false,"isFirstSection":true,"commentOffset":0,"codeOffset":0,"headings":[{"id":"introduction","name":"Introduction"}],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"\n## Introduction\n\nThis is a sample template for a poll in AMP. After selecting one of the answers, you will see the percentage of chosen answers.\n\n\n"},{"doc_":"\n","code":"<!doctype html>\n<html ⚡>\n<head>\n<meta charset=\"utf-8\">\n      <title>Poll</title>\n      <script async src=\"https://cdn.ampproject.org/v0.js\"></script>\n","preview":"","inBody":false,"id":1,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":0,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":" \n"},{"doc_":"## Setup\n","code":"","preview":"","inBody":false,"id":2,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":0,"headings":[{"id":"setup","name":"Setup"}],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"## Setup\n"},{"doc_":"\nImport the additional AMP components. This sample uses `amp-form` to accept poll responses.\n\n","code":"<script async custom-element=\"amp-form\" src=\"https://cdn.ampproject.org/v0/amp-form-0.1.js\"></script>\n","preview":"","inBody":false,"id":3,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":6,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"\nImport the additional AMP components. This sample uses `amp-form` to accept poll responses.\n\n"},{"doc_":"\nThis sample uses mustache templates to format poll results\n\n","code":"<script async custom-template=\"amp-mustache\" src=\"https://cdn.ampproject.org/v0/amp-mustache-0.2.js\"></script>\n","preview":"","inBody":false,"id":4,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":6,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"\nThis sample uses mustache templates to format poll results\n\n"},{"doc_":"","code":"<link rel=\"canonical\" href=\"http://localhost:8080/documentation/examples/interactivity-dynamic-content/poll/index.html\">\n<meta name=\"viewport\" content=\"width=device-width,minimum-scale=1,initial-scale=1\">\n<style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>\n\n  <style amp-custom>\n:root {\n--color-primary: #005AF0;\n--space-1: .5rem;  /* 8px */\n--space-2: 1rem;   /* 16px */\n}\n#sample-poll {\npadding: var(--space-2);\ndisplay: flex;\nflex-direction: column;\n}\n#sample-poll > * {\nmargin-bottom: var(--space-2);\n}\n#sample-poll label {\ndisplay: flex;\nwidth: 150px;\njustify-content: space-between;\n}\n#sample-poll.amp-form-submit-success label {\ndisplay: none;\n}\n.one-pc-fixed {\nwidth: 2px;\ndisplay: inline-block;\nbackground: var(--color-primary);\nheight: var(--space-2);\nfloat: left;\n}\n  </style>\n</head>\n<body>\n\n","preview":"\n","inBody":false,"id":5,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":6,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":""},{"doc_":"## Poll\n","code":"","preview":"","inBody":true,"id":6,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":0,"headings":[{"id":"poll","name":"Poll"}],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"## Poll\n"},{"doc_":"\nWe use `amp-form` to implement a poll. To avoid multiple votes by the same user, we need to identify which users have already voted. We use a cookie called `POLL_USER_ID` to identify the user. Given that in Safari the default behavior is to block third-party cookies from sites that have not been previously visited, this approach may not work if the page is visited via the AMP Cache. In this case we fallback to checking for duplicate entries via the `CLIENT_ID`.\n\nThe `CLIENT_ID` is a unique identifier for the user when accessing a specific origin, for example the original page or the cached version of it. This means that the same user will generate two different values when accessing different origins. That's why we use a custom cookie to track cross origin access to the poll page.\n\nRead more about [variable substitution](/amp-dev/documentation/components/reference/amp-form.md#variable-substitutions). Currently, HTML tables are not supported in form responses, so we'll use CSS to layout the result data.\n\nRead more about [variable substitution](/amp-dev/documentation/components/reference/amp-form.md#variable-substitutions).\n\nIn order to submit the form as soon as the user picks an option, we will add an\n\n[`on` attribute](/documentation/guides-and-tutorials/learn/amp-actions-and-events.html?format=websites#input-elements) to each `<input>`, that will submit the poll on change.\n\n","code":"<form id=\"sample-poll\"\n  method=\"post\"\n  action-xhr=\"http://localhost:8080/documentation/examples/interactivity-dynamic-content/poll/submit-poll\"\n  target=\"_blank\">\n  <input name=\"clientId\"\n    type=\"hidden\"\n    value=\"CLIENT_ID(POLL_USER_ID)\"\n    data-amp-replace=\"CLIENT_ID\">\n  <h3>What is your favorite flightless bird?</h3>\n  <p>Choose your favourite flightless bird and you will discover what other users have chosen.\n    If you have already voted, your answer will be overwritten.</p>\n  <label>Penguins <input type=\"radio\"\n      value=\"0\"\n      name=\"answer\"\n      on=\"change:sample-poll.submit\"></label>\n  <label>Ostriches <input type=\"radio\"\n      value=\"1\"\n      name=\"answer\"\n      on=\"change:sample-poll.submit\"></label>\n  <label>Kiwis <input type=\"radio\"\n      value=\"2\"\n      name=\"answer\"\n      on=\"change:sample-poll.submit\"></label>\n  <label>Wekas <input type=\"radio\"\n      value=\"3\"\n      name=\"answer\"\n      on=\"change:sample-poll.submit\"></label>\n  <div submit-success>\n    <script type=\"text/plain\"\n      template=\"amp-mustache\">\n      <p>{{Message}}</p>\n              <p>Here are the results:</p>\n              <table>\n                {{#PollEntryResults}}\n                <tr>\n                  <td>\n                    {{Answer}}\n                  </td>\n                  <td>\n                    {{Percentage.length}}%\n                  </td>\n                  <td>\n                    {{Votes}}\n                  </td>\n                  <td>\n                    {{#Percentage}}<span class=\"one-pc-fixed\"></span>{{/Percentage}}\n                  </td>\n                </tr>\n                {{/PollEntryResults}}\n              </table>\n            </script>\n  </div>\n  <div submit-error>\n    Error! Looks like something went wrong with your vote, please try to submit it again. {{error}}\n  </div>\n</form>\n","preview":"  <form id=\"sample-poll\"\n    method=\"post\"\n    action-xhr=\"http://localhost:8080/documentation/examples/interactivity-dynamic-content/poll/submit-poll\"\n    target=\"_blank\">\n    <input name=\"clientId\"\n      type=\"hidden\"\n      value=\"CLIENT_ID(POLL_USER_ID)\"\n      data-amp-replace=\"CLIENT_ID\">\n    <h3>What is your favorite flightless bird?</h3>\n    <p>Choose your favourite flightless bird and you will discover what other users have chosen.\n      If you have already voted, your answer will be overwritten.</p>\n    <label>Penguins <input type=\"radio\"\n        value=\"0\"\n        name=\"answer\"\n        on=\"change:sample-poll.submit\"></label>\n    <label>Ostriches <input type=\"radio\"\n        value=\"1\"\n        name=\"answer\"\n        on=\"change:sample-poll.submit\"></label>\n    <label>Kiwis <input type=\"radio\"\n        value=\"2\"\n        name=\"answer\"\n        on=\"change:sample-poll.submit\"></label>\n    <label>Wekas <input type=\"radio\"\n        value=\"3\"\n        name=\"answer\"\n        on=\"change:sample-poll.submit\"></label>\n    <div submit-success>\n      <script type=\"text/plain\"\n        template=\"amp-mustache\">\n        <p>{{Message}}</p>\n                <p>Here are the results:</p>\n                <table>\n                  {{#PollEntryResults}}\n                  <tr>\n                    <td>\n                      {{Answer}}\n                    </td>\n                    <td>\n                      {{Percentage.length}}%\n                    </td>\n                    <td>\n                      {{Votes}}\n                    </td>\n                    <td>\n                      {{#Percentage}}<span class=\"one-pc-fixed\"></span>{{/Percentage}}\n                    </td>\n                  </tr>\n                  {{/PollEntryResults}}\n                </table>\n              </script>\n    </div>\n    <div submit-error>\n      Error! Looks like something went wrong with your vote, please try to submit it again. {{error}}\n    </div>\n  </form>\n","inBody":true,"id":7,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":2,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"  \n        We use `amp-form` to implement a poll. To avoid multiple votes by the same user, we need to identify which users have already voted. We use a cookie called `POLL_USER_ID` to identify the user. Given that in Safari the default behavior is to block third-party cookies from sites that have not been previously visited, this approach may not work if the page is visited via the AMP Cache. In this case we fallback to checking for duplicate entries via the `CLIENT_ID`.\n\n        The `CLIENT_ID` is a unique identifier for the user when accessing a specific origin, for example the original page or the cached version of it. This means that the same user will generate two different values when accessing different origins. That's why we use a custom cookie to track cross origin access to the poll page.\n\nRead more about [variable substitution](/amp-dev/documentation/components/reference/amp-form.md#variable-substitutions). Currently, HTML tables are not supported in form responses, so we'll use CSS to layout the result data.\n\n        Read more about [variable substitution](/amp-dev/documentation/components/reference/amp-form.md#variable-substitutions).\n\n        In order to submit the form as soon as the user picks an option, we will add an\n        [`on` attribute](/documentation/guides-and-tutorials/learn/amp-actions-and-events.html?format=websites#input-elements) to each `<input>`, that will submit the poll on change.\n      \n"},{"doc_":"","code":"</body>\n</html>\n","preview":"","inBody":false,"id":8,"cachedMarkedDoc":false,"isLastSection":true,"isFirstSection":false,"commentOffset":0,"codeOffset":0,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":""}],"head":"<meta charset=\"utf-8\">\n      <title>Poll</title>\n      <script async src=\"https://cdn.ampproject.org/v0.js\"></script>\n      <script async custom-element=\"amp-form\" src=\"https://cdn.ampproject.org/v0/amp-form-0.1.js\"></script>\n      <script async custom-template=\"amp-mustache\" src=\"https://cdn.ampproject.org/v0/amp-mustache-0.2.js\"></script>\n      <link rel=\"canonical\" href=\"http://localhost:8080/documentation/examples/interactivity-dynamic-content/poll/index.html\">\n      <meta name=\"viewport\" content=\"width=device-width,minimum-scale=1,initial-scale=1\">\n      <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>\n\n","styles":":root {\n  --color-primary: #005AF0;\n  --space-1: .5rem;  /* 8px */\n  --space-2: 1rem;   /* 16px */\n}\n  #sample-poll {\n    padding: var(--space-2);\n    display: flex;\n    flex-direction: column;\n  }\n  #sample-poll > * {\n    margin-bottom: var(--space-2);\n  }\n  #sample-poll label {\n    display: flex;\n    width: 150px;\n    justify-content: space-between;\n  }\n  #sample-poll.amp-form-submit-success label {\n    display: none;\n  }\n  .one-pc-fixed {\n    width: 2px;\n    display: inline-block;\n    background: var(--color-primary);\n    height: var(--space-2);\n    float: left;\n  }\n","title":"Poll","metadata":{"preview":"default","teaserImage":"/static/samples/img/teaser/poll.jpg","author":"aghassemi"},"body":"<body>","elementsAfterBody":"","isAmpStory":false,"isAmpWeb":true,"isAmpAds":false,"isAmpEmail":false,"firstImage":"/favicons/android-chrome-256x256.png","lang":"en","_description":"This is a sample template for a poll in AMP."},"route":"/documentation/examples/interactivity-dynamic-content/poll/index.html"}