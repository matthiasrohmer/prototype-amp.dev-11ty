{"filePath":"examples/source/interactivity-dynamic-content/Restrict_Duplicate_Selection.html","source":"<!--\n\n## Introduction\n\nThis is a sample showing how to restrict duplicate selection of items in `amp-list`. This uses\n`amp-selector` in combination with `amp-bind` to check whether or not an item is currently in\nthe list (populated by `fruits` list).\n\nIf the fruit you select is already in the `fruits` list, the `fruits` list doesn't change.\n\nIf the fruit you select is not already in the `fruits` list then it's added to the end\nof the list.\n-->\n<!doctype html>\n<html ⚡>\n<head>\n<meta charset=\"utf-8\">\n  <title>Restrict Duplicate Selection</title>\n  <link rel=\"canonical\" href=\"http://localhost:8080/documentation/examples/interactivity-dynamic-content/restrict_duplicate_selection/index.html\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n  <script async src=\"https://cdn.ampproject.org/v0.js\"></script>\n  <!-- ## Setup -->\n  <!-- Import the `amp-bind` component to hold the selected fruits -->\n  <script async custom-element=\"amp-bind\" src=\"https://cdn.ampproject.org/v0/amp-bind-0.1.js\"></script>\n  <!-- Import the `amp-list` component to import the list of fruits to select from -->\n  <script async custom-element=\"amp-list\" src=\"https://cdn.ampproject.org/v0/amp-list-0.1.js\"></script>\n  <!-- Import the `amp-selector` component so user can choose fruits -->\n  <script async custom-element=\"amp-selector\" src=\"https://cdn.ampproject.org/v0/amp-selector-0.1.js\"></script>\n  <!-- The `amp-mustache` component is required if using `amp-selector` with `amp-list` -->\n  <script async custom-template=\"amp-mustache\" src=\"https://cdn.ampproject.org/v0/amp-mustache-0.2.js\"></script>\n  <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>\n</head>\n\n<body>\n  <h2> Restrict Duplicate Selection Example </h2>\n  <!-- ## Implementation -->\n  <!--\n      We use the `amp-state` element to create a list that's initially empty but will update once user selects fruits. User selects fruits from `amp-list` element (imported from fruits.json file).\n\n      Every time the user tries to select a fruit, the `amp-selector` element will validate whether or not fruit is already in `fruits` list.\n      If fruit is not already in the list, `amp-selector` will change the state of the `fruits` list with the new fruit at end. If fruit is in `fruit-selected` list, the list stays the same.\n    -->\n  <div>\n    <amp-state id=\"fruits\">\n      <script type=\"application/json\">\n        []\n      </script>\n    </amp-state>\n    <p>\n      Pick your favorite fruites from this list <br> You can only add new fruits to the list, you can't add the same fruit\n      multiple times.\n    </p>\n    <div style=\"resize: horizontal; overflow: auto;\">\n      <p [text]=\"fruits\">Select fruits!</p>\n    </div>\n    <amp-list src=\"/static/samples/json/fruits.json\" height=\"242\" items=\".\" single-item>\n      <template type=\"amp-mustache\">\n        <ul>\n          <amp-selector on=\"select:AMP.setState({fruits: fruits.includes(event.targetOption) ? fruits : fruits.concat([event.targetOption])})\">\n            {{#items}}\n              <li option=\"{{name}}\" role=\"button\" tabindex=\"0\">\n                {{name}}\n              </li>\n            {{/items}}\n          </amp-selector>\n        </ul>\n      </template>\n    </amp-list>\n  </div>\n</body></html>","document":{"sections":[{"doc_":"\n## Introduction\n\nThis is a sample showing how to restrict duplicate selection of items in `amp-list`. This uses\n`amp-selector` in combination with `amp-bind` to check whether or not an item is currently in\nthe list (populated by `fruits` list).\n\nIf the fruit you select is already in the `fruits` list, the `fruits` list doesn't change.\n\nIf the fruit you select is not already in the `fruits` list then it's added to the end\nof the list.\n\n","code":"<!doctype html>\n<html ⚡>\n<head>\n<meta charset=\"utf-8\">\n  <title>Restrict Duplicate Selection</title>\n  <link rel=\"canonical\" href=\"http://localhost:8080/documentation/examples/interactivity-dynamic-content/restrict_duplicate_selection/index.html\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n  <script async src=\"https://cdn.ampproject.org/v0.js\"></script>\n","preview":"","inBody":false,"id":0,"cachedMarkedDoc":"<h2 id=\"introduction\" class=\"www-heading pb4 mb2 relative h3\">Introduction</h2><p class=\"mb2 px1\">This is a sample showing how to restrict duplicate selection of items in <code>amp-list</code>. This uses\n<code>amp-selector</code> in combination with <code>amp-bind</code> to check whether or not an item is currently in\nthe list (populated by <code>fruits</code> list).</p><p class=\"mb2 px1\">If the fruit you select is already in the <code>fruits</code> list, the <code>fruits</code> list doesn&#39;t change.</p><p class=\"mb2 px1\">If the fruit you select is not already in the <code>fruits</code> list then it&#39;s added to the end\nof the list.</p>","isLastSection":false,"isFirstSection":true,"commentOffset":0,"codeOffset":0,"headings":[{"id":"introduction","name":"Introduction"}],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"\n\n## Introduction\n\nThis is a sample showing how to restrict duplicate selection of items in `amp-list`. This uses\n`amp-selector` in combination with `amp-bind` to check whether or not an item is currently in\nthe list (populated by `fruits` list).\n\nIf the fruit you select is already in the `fruits` list, the `fruits` list doesn't change.\n\nIf the fruit you select is not already in the `fruits` list then it's added to the end\nof the list.\n\n"},{"doc_":"## Setup\n","code":"","preview":"","inBody":false,"id":1,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":0,"headings":[{"id":"setup","name":"Setup"}],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"## Setup\n"},{"doc_":"Import the `amp-bind` component to hold the selected fruits \n","code":"<script async custom-element=\"amp-bind\" src=\"https://cdn.ampproject.org/v0/amp-bind-0.1.js\"></script>\n","preview":"","inBody":false,"id":2,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":2,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"Import the `amp-bind` component to hold the selected fruits \n"},{"doc_":"Import the `amp-list` component to import the list of fruits to select from \n","code":"<script async custom-element=\"amp-list\" src=\"https://cdn.ampproject.org/v0/amp-list-0.1.js\"></script>\n","preview":"","inBody":false,"id":3,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":2,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"Import the `amp-list` component to import the list of fruits to select from \n"},{"doc_":"Import the `amp-selector` component so user can choose fruits \n","code":"<script async custom-element=\"amp-selector\" src=\"https://cdn.ampproject.org/v0/amp-selector-0.1.js\"></script>\n","preview":"","inBody":false,"id":4,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":2,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"Import the `amp-selector` component so user can choose fruits \n"},{"doc_":"The `amp-mustache` component is required if using `amp-selector` with `amp-list` \n","code":"<script async custom-template=\"amp-mustache\" src=\"https://cdn.ampproject.org/v0/amp-mustache-0.2.js\"></script>\n","preview":"","inBody":false,"id":5,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":2,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"The `amp-mustache` component is required if using `amp-selector` with `amp-list` \n"},{"doc_":"","code":"<style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>\n</head>\n\n<body>\n<h2> Restrict Duplicate Selection Example </h2>\n","preview":"  <h2> Restrict Duplicate Selection Example </h2>\n","inBody":false,"id":6,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":2,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":""},{"doc_":"## Implementation\n","code":"","preview":"","inBody":true,"id":7,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":0,"headings":[{"id":"implementation","name":"Implementation"}],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"## Implementation\n"},{"doc_":"\nWe use the `amp-state` element to create a list that's initially empty but will update once user selects fruits. User selects fruits from `amp-list` element (imported from fruits.json file).\n\nEvery time the user tries to select a fruit, the `amp-selector` element will validate whether or not fruit is already in `fruits` list.\nIf fruit is not already in the list, `amp-selector` will change the state of the `fruits` list with the new fruit at end. If fruit is in `fruit-selected` list, the list stays the same.\n\n","code":"<amp-state id=\"fruits\">\n  <script type=\"application/json\">\n    []\n  </script>\n</amp-state>\n<p>\n  Pick your favorite fruites from this list <br> You can only add new fruits to the list, you can't add the same fruit\n  multiple times.\n</p>\n<div style=\"resize: horizontal; overflow: auto;\">\n  <p [text]=\"fruits\">Select fruits!</p>\n</div>\n<amp-list src=\"/static/samples/json/fruits.json\"\n  height=\"242\"\n  items=\".\"\n  single-item>\n  <template type=\"amp-mustache\">\n    <ul>\n      <amp-selector on=\"select:AMP.setState({fruits: fruits.includes(event.targetOption) ? fruits : fruits.concat([event.targetOption])})\">\n        {{#items}}\n          <li option=\"{{name}}\"\n            role=\"button\"\n            tabindex=\"0\">\n            {{name}}\n          </li>\n        {{/items}}\n      </amp-selector>\n    </ul>\n  </template>\n</amp-list>","preview":"  <div>\n    <amp-state id=\"fruits\">\n      <script type=\"application/json\">\n        []\n      </script>\n    </amp-state>\n    <p>\n      Pick your favorite fruites from this list <br> You can only add new fruits to the list, you can't add the same fruit\n      multiple times.\n    </p>\n    <div style=\"resize: horizontal; overflow: auto;\">\n      <p [text]=\"fruits\">Select fruits!</p>\n    </div>\n    <amp-list src=\"/static/samples/json/fruits.json\"\n      height=\"242\"\n      items=\".\"\n      single-item>\n      <template type=\"amp-mustache\">\n        <ul>\n          <amp-selector on=\"select:AMP.setState({fruits: fruits.includes(event.targetOption) ? fruits : fruits.concat([event.targetOption])})\">\n            {{#items}}\n              <li option=\"{{name}}\"\n                role=\"button\"\n                tabindex=\"0\">\n                {{name}}\n              </li>\n            {{/items}}\n          </amp-selector>\n        </ul>\n      </template>\n    </amp-list>\n  </div>\n","inBody":true,"id":8,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":2,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"\nWe use the `amp-state` element to create a list that's initially empty but will update once user selects fruits. User selects fruits from `amp-list` element (imported from fruits.json file).\n\nEvery time the user tries to select a fruit, the `amp-selector` element will validate whether or not fruit is already in `fruits` list.\nIf fruit is not already in the list, `amp-selector` will change the state of the `fruits` list with the new fruit at end. If fruit is in `fruit-selected` list, the list stays the same.\n\n"},{"doc_":"","code":"</body>\n</html>\n","preview":"","inBody":false,"id":9,"cachedMarkedDoc":false,"isLastSection":true,"isFirstSection":false,"commentOffset":0,"codeOffset":0,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":""}],"head":"<meta charset=\"utf-8\">\n  <title>Restrict Duplicate Selection</title>\n  <link rel=\"canonical\" href=\"http://localhost:8080/documentation/examples/interactivity-dynamic-content/restrict_duplicate_selection/index.html\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n  <script async src=\"https://cdn.ampproject.org/v0.js\"></script>\n  <script async custom-element=\"amp-bind\" src=\"https://cdn.ampproject.org/v0/amp-bind-0.1.js\"></script>\n  <script async custom-element=\"amp-list\" src=\"https://cdn.ampproject.org/v0/amp-list-0.1.js\"></script>\n  <script async custom-element=\"amp-selector\" src=\"https://cdn.ampproject.org/v0/amp-selector-0.1.js\"></script>\n  <script async custom-template=\"amp-mustache\" src=\"https://cdn.ampproject.org/v0/amp-mustache-0.2.js\"></script>\n  <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>\n","styles":"","title":"Restrict Duplicate Selection","metadata":{"author":"elisameyer","tags":["dynamic-content"]},"body":"<body>","elementsAfterBody":"","isAmpStory":false,"isAmpWeb":true,"isAmpAds":false,"isAmpEmail":false,"firstImage":"/favicons/android-chrome-256x256.png","lang":"en","_description":"This is a sample showing how to restrict duplicate selection of items in amp-list."},"route":"/documentation/examples/interactivity-dynamic-content/restrict_duplicate_selection/index.html"}