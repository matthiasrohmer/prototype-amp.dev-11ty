{"filePath":"examples/source/personalization/OAuth2_Login/index.html","source":"<!--\n## Introduction\n\nThis sample showcases how to use [amp-access](/content/amp-dev/documentation/components/reference/amp-access-v0.1.md)\nto allow an OAuth2-based login flow on your AMP pages, such as Google, Facebook and GitHub sign-in.\n--><!-- -->\n<!doctype html>\n<html ⚡>\n<head>\n<meta charset=\"utf-8\">\n    <title>OAuth2 Login</title>\n    <script async src=\"https://cdn.ampproject.org/v0.js\"></script>\n    <script async custom-template=\"amp-mustache\" src=\"https://cdn.ampproject.org/v0/amp-mustache-0.2.js\"></script>\n    <!--\n      ## Setup\n\n      We need to import the `amp-access` component.\n    -->\n    <script async custom-element=\"amp-access\" src=\"https://cdn.ampproject.org/v0/amp-access-0.1.js\"></script>\n    <link rel=\"canonical\" href=\"http://localhost:8080/documentation/examples/personalization/oauth2_login/index.html\">\n    <meta name=\"viewport\" content=\"width=device-width,minimum-scale=1,initial-scale=1\">\n\n    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>\n\n    <!--\n      `amp-access` requires the definition of 3 endpoints as documented [here](/content/amp-dev/documentation/components/reference/amp-access-v0.1.md).\n\n      This sample allows an user to login and logout using an OAuth2-based flow. Logout is implemented by configuring a second endpoint in the login property `sign-out`, find more [here](/content/amp-dev/documentation/components/reference/amp-access.md#login-page).\n    -->\n    <script id=\"amp-access\" type=\"application/json\">\n    {\n        \"authorization\": \"/documentation/examples/personalization/oauth2_login/status?_=RANDOM\",\n        \"noPingback\": \"true\",\n        \"login\": {\n          \"facebook-sign-in\": \"/documentation/examples/personalization/oauth2_login/login/facebook\",\n          \"google-sign-in\": \"/documentation/examples/personalization/oauth2_login/login/google\",\n          \"github-sign-in\": \"/documentation/examples/personalization/oauth2_login/login/github\",\n          \"sign-out\": \"/documentation/examples/personalization/oauth2_login/logout\"\n        },\n        \"authorizationFallbackResponse\": {\n            \"error\": true,\n            \"loggedIn\": false\n        }\n    }\n    </script>\n  </head>\n  <body>\n    <!--\n      ## Implementation\n\n      We use `amp-access` to integrate an OAuth2-based login and to show and hide the login button depending on whether the user is logged in.\n      `on=\"tap:amp-access.login-google-sign-in\"` specifies which action should be taken when clicking on the login button:\n      `login` defines the property inside the `amp-access` json configuration, while `google-sign-in` defines the endpoint.\n    -->\n    <div amp-access=\"NOT loggedIn\" amp-access-hide>\n      <h3>Please login to view content</h3>\n      <button on=\"tap:amp-access.login-google-sign-in\">Google Login</button>\n      <button on=\"tap:amp-access.login-facebook-sign-in\">Facebook Login</button>\n      <button on=\"tap:amp-access.login-github-sign-in\">GitHub Login</button>\n    </div>\n\n    <!-- When logged in, we use `amp-access-template` to display information returned from the authorization endpoint, in this case the user's name. -->\n    <div amp-access=\"loggedIn\" amp-access-hide>\n      <template amp-access-template type=\"amp-mustache\">\n        <p>Hello {{name}}! You are logged in.</p>\n      </template>\n    </div>\n\n    <!-- We specify the logout via a login endpoint to be able to use the `return URL` environment variable. -->\n    <button amp-access=\"loggedIn\" amp-access-hide on=\"tap:amp-access.login-sign-out\">Logout</button>\n</body></html>","document":{"sections":[{"doc_":"\n## Introduction\n\nThis sample showcases how to use [amp-access](/content/amp-dev/documentation/components/reference/amp-access-v0.1.md)\nto allow an OAuth2-based login flow on your AMP pages, such as Google, Facebook and GitHub sign-in.\n\n","code":"","preview":"","inBody":false,"id":0,"cachedMarkedDoc":"<h2 id=\"introduction\" class=\"www-heading pb4 mb2 relative h3\">Introduction</h2><p class=\"mb2 px1\">This sample showcases how to use <a href=\"/content/amp-dev/documentation/components/reference/amp-access-v0.1.md\">amp-access</a>\nto allow an OAuth2-based login flow on your AMP pages, such as Google, Facebook and GitHub sign-in.</p>","isLastSection":false,"isFirstSection":true,"commentOffset":0,"codeOffset":0,"headings":[{"id":"introduction","name":"Introduction"}],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"\n## Introduction\n\nThis sample showcases how to use [amp-access](/content/amp-dev/documentation/components/reference/amp-access-v0.1.md)\nto allow an OAuth2-based login flow on your AMP pages, such as Google, Facebook and GitHub sign-in.\n\n"},{"doc_":"\n","code":"<!doctype html>\n<html ⚡>\n<head>\n<meta charset=\"utf-8\">\n    <title>OAuth2 Login</title>\n    <script async src=\"https://cdn.ampproject.org/v0.js\"></script>\n    <script async custom-template=\"amp-mustache\" src=\"https://cdn.ampproject.org/v0/amp-mustache-0.2.js\"></script>\n","preview":"","inBody":false,"id":1,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":0,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":" \n"},{"doc_":"\n## Setup\n\nWe need to import the `amp-access` component.\n\n","code":"<script async custom-element=\"amp-access\" src=\"https://cdn.ampproject.org/v0/amp-access-0.1.js\"></script>\n","preview":"","inBody":false,"id":2,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":4,"headings":[{"id":"setup","name":"Setup"}],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"\n## Setup\n\nWe need to import the `amp-access` component.\n\n"},{"doc_":"","code":"<link rel=\"canonical\" href=\"http://localhost:8080/documentation/examples/personalization/oauth2_login/index.html\">\n<meta name=\"viewport\" content=\"width=device-width,minimum-scale=1,initial-scale=1\">\n\n<style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>\n\n","preview":"","inBody":false,"id":3,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":4,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":""},{"doc_":"\n`amp-access` requires the definition of 3 endpoints as documented [here](/content/amp-dev/documentation/components/reference/amp-access-v0.1.md).\n\nThis sample allows an user to login and logout using an OAuth2-based flow. Logout is implemented by configuring a second endpoint in the login property `sign-out`, find more [here](/content/amp-dev/documentation/components/reference/amp-access.md#login-page).\n\n","code":"<script id=\"amp-access\" type=\"application/json\">\n{\n    \"authorization\": \"/documentation/examples/personalization/oauth2_login/status?_=RANDOM\",\n    \"noPingback\": \"true\",\n    \"login\": {\n      \"facebook-sign-in\": \"/documentation/examples/personalization/oauth2_login/login/facebook\",\n      \"google-sign-in\": \"/documentation/examples/personalization/oauth2_login/login/google\",\n      \"github-sign-in\": \"/documentation/examples/personalization/oauth2_login/login/github\",\n      \"sign-out\": \"/documentation/examples/personalization/oauth2_login/logout\"\n    },\n    \"authorizationFallbackResponse\": {\n        \"error\": true,\n        \"loggedIn\": false\n    }\n}\n</script>\n","preview":"","inBody":false,"id":4,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":4,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"\n`amp-access` requires the definition of 3 endpoints as documented [here](/content/amp-dev/documentation/components/reference/amp-access-v0.1.md).\n\nThis sample allows an user to login and logout using an OAuth2-based flow. Logout is implemented by configuring a second endpoint in the login property `sign-out`, find more [here](/content/amp-dev/documentation/components/reference/amp-access.md#login-page).\n\n"},{"doc_":"","code":"</head>\n<body>\n","preview":"","inBody":false,"id":5,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":2,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":""},{"doc_":"\n## Implementation\n\nWe use `amp-access` to integrate an OAuth2-based login and to show and hide the login button depending on whether the user is logged in.\n`on=\"tap:amp-access.login-google-sign-in\"` specifies which action should be taken when clicking on the login button:\n`login` defines the property inside the `amp-access` json configuration, while `google-sign-in` defines the endpoint.\n\n","code":"<div amp-access=\"NOT loggedIn\"\n  amp-access-hide>\n  <h3>Please login to view content</h3>\n  <button on=\"tap:amp-access.login-google-sign-in\">Google Login</button>\n  <button on=\"tap:amp-access.login-facebook-sign-in\">Facebook Login</button>\n  <button on=\"tap:amp-access.login-github-sign-in\">GitHub Login</button>\n</div>\n","preview":"  <div amp-access=\"NOT loggedIn\"\n    amp-access-hide>\n    <h3>Please login to view content</h3>\n    <button on=\"tap:amp-access.login-google-sign-in\">Google Login</button>\n    <button on=\"tap:amp-access.login-facebook-sign-in\">Facebook Login</button>\n    <button on=\"tap:amp-access.login-github-sign-in\">GitHub Login</button>\n  </div>\n","inBody":true,"id":6,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":2,"headings":[{"id":"implementation","name":"Implementation"}],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"\n## Implementation\n\nWe use `amp-access` to integrate an OAuth2-based login and to show and hide the login button depending on whether the user is logged in.\n`on=\"tap:amp-access.login-google-sign-in\"` specifies which action should be taken when clicking on the login button:\n`login` defines the property inside the `amp-access` json configuration, while `google-sign-in` defines the endpoint.\n\n"},{"doc_":"","code":"\n","preview":"\n","inBody":true,"id":7,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":0,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":""},{"doc_":"When logged in, we use `amp-access-template` to display information returned from the authorization endpoint, in this case the user's name. \n","code":"<div amp-access=\"loggedIn\"\n  amp-access-hide>\n  <template amp-access-template\n    type=\"amp-mustache\">\n    <p>Hello {{name}}! You are logged in.</p>\n  </template>\n</div>\n","preview":"  <div amp-access=\"loggedIn\"\n    amp-access-hide>\n    <template amp-access-template\n      type=\"amp-mustache\">\n      <p>Hello {{name}}! You are logged in.</p>\n    </template>\n  </div>\n","inBody":true,"id":8,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":2,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"When logged in, we use `amp-access-template` to display information returned from the authorization endpoint, in this case the user's name. \n"},{"doc_":"","code":"\n","preview":"\n","inBody":true,"id":9,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":0,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":""},{"doc_":"We specify the logout via a login endpoint to be able to use the `return URL` environment variable. \n","code":"<button amp-access=\"loggedIn\"\n  amp-access-hide\n  on=\"tap:amp-access.login-sign-out\">Logout</button>\n","preview":"  <button amp-access=\"loggedIn\"\n    amp-access-hide\n    on=\"tap:amp-access.login-sign-out\">Logout</button>\n","inBody":true,"id":10,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":2,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"We specify the logout via a login endpoint to be able to use the `return URL` environment variable. \n"},{"doc_":"","code":"</body>\n</html>\n","preview":"","inBody":false,"id":11,"cachedMarkedDoc":false,"isLastSection":true,"isFirstSection":false,"commentOffset":0,"codeOffset":0,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":""}],"head":"<meta charset=\"utf-8\">\n    <title>OAuth2 Login</title>\n    <script async src=\"https://cdn.ampproject.org/v0.js\"></script>\n    <script async custom-template=\"amp-mustache\" src=\"https://cdn.ampproject.org/v0/amp-mustache-0.2.js\"></script>\n    <script async custom-element=\"amp-access\" src=\"https://cdn.ampproject.org/v0/amp-access-0.1.js\"></script>\n    <link rel=\"canonical\" href=\"http://localhost:8080/documentation/examples/personalization/oauth2_login/index.html\">\n    <meta name=\"viewport\" content=\"width=device-width,minimum-scale=1,initial-scale=1\">\n\n    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>\n\n    <script id=\"amp-access\" type=\"application/json\">\n    {\n        \"authorization\": \"/documentation/examples/personalization/oauth2_login/status?_=RANDOM\",\n        \"noPingback\": \"true\",\n        \"login\": {\n          \"facebook-sign-in\": \"/documentation/examples/personalization/oauth2_login/login/facebook\",\n          \"google-sign-in\": \"/documentation/examples/personalization/oauth2_login/login/google\",\n          \"github-sign-in\": \"/documentation/examples/personalization/oauth2_login/login/github\",\n          \"sign-out\": \"/documentation/examples/personalization/oauth2_login/logout\"\n        },\n        \"authorizationFallbackResponse\": {\n            \"error\": true,\n            \"loggedIn\": false\n        }\n    }\n    </script>\n","styles":"","title":"OAuth2 Login","metadata":{"preview":"default","teaserImage":"/static/samples/img/teaser/oauth2_login.jpg","author":"fstanis"},"body":"<body>","elementsAfterBody":"","isAmpStory":false,"isAmpWeb":true,"isAmpAds":false,"isAmpEmail":false,"firstImage":"/favicons/android-chrome-256x256.png","lang":"en","_description":"This sample showcases how to use amp-access to allow an OAuth2-based login flow on your AMP pages, such as Google, Facebook and GitHub sign-in."},"route":"/documentation/examples/personalization/oauth2_login/index.html"}