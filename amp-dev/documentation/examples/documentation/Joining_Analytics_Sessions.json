{"filePath":"examples/source/advertising-analytics/Joining_Analytics_Sessions.html","source":"<!--\n  ## Introduction\n\n  Linker is an `amp-analytics` feature to join user sessions from the AMP Cache domain to publisher origin domains. For complete documentation please see the components' [reference](/amp-dev/documentation/components/reference/amp-analytics.md#linkers).\n\n  If you would like to learn more aboout client ids in AMP, you may find a brief summary [here](/amp-dev/documentation/guides-and-tutorials/optimize-measure/configure-analytics/analytics_basics.md#user-identification), as well as Google Analytics specific information [here](https://developers.google.com/analytics/devguides/collection/amp-analytics/client-id).\n\n  To see this whole process in action, please follow [this link](/static/samples/linker/demo-page.html).\n-->\n<!-- -->\n<!doctype html>\n<html ⚡>\n<head>\n  <meta charset=\"utf-8\">\n  <link rel=\"canonical\" href=\"http://localhost:8080/documentation/examples/advertising-analytics/joining_analytics_sessions/index.html\">\n  <meta name=\"viewport\" content=\"width=device-width,minimum-scale=1,initial-scale=1\">\n  <script async src=\"https://cdn.ampproject.org/v0.js\"></script>\n  <title>Joining Analytics Sessions</title>\n  <!-- ## Setup -->\n  <!--  Import the amp-analytics component in the header. -->\n  <script async custom-element=\"amp-analytics\" src=\"https://cdn.ampproject.org/v0/amp-analytics-0.1.js\"></script>\n  <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>\n</head>\n<body>\n\n  <!-- ## Using AMP Linker with your existing analytics provider -->\n  <!--\n    If your analytics provider is already supporting the Linker functionality, turning it on is a simple configuration change. Add the following to your exisisting `amp-analytics` configuration.\n  -->\n  <div>\n    <amp-analytics type=\"googleanalytics\">\n      <script type=\"application/json\">\n        {\n          \"linkers\": {\n            \"enabled\": true\n          }\n        }\n      </script>\n    </amp-analytics>\n  </div>\n\n  <!-- ## Using AMP Linker with custom analytics -->\n  <!--\n    If you wish to setup your own configuration, AMP linker supports that as well. In the following example a linker parameter with the name `linker1` will be appended to outgoing links. The value of this parameter will include any key-value pairs in the `ids` configuration object. Specifically in this example, two entries will be passed along. A key-value pair with the key `_a` and the value returned by the `CLIENT_ID` macro, and a key of `v` with the value `123`. You may include as many entries in the `ids` object as you wish.\n  -->\n  <amp-analytics>\n      <script type=\"application/json\">\n        {\n          ... // existing amp-analytics configuration\n          \"linkers\" : {\n            \"linker1\": {\n              \"ids\": {\n                \"_a\": \"CLIENT_ID(_a)\",\n                \"v\": 123\n              },\n              \"enabled\": true\n            }\n          }\n        }\n      </script>\n  </amp-analytics>\n\n  <!-- ## Using AMP Linker with multiple linkers -->\n  <!--\n   You may also want to configure multiple linkers on one page. To do this you would add an entry to the `linkers` object for each linker. You may also enable all the linkers at once by moving the `enabled: true` entry one level below the `linkers` object.\n  -->\n  <amp-analytics>\n      <script type=\"application/json\">\n        {\n          \"linkers\" : {\n            \"enabled\": true,\n            \"linker1\": {\n              \"ids\": {\n                \"_a\": \"CLIENT_ID(_a)\",\n              }\n            },\n            \"linker2\": {\n              \"ids\": {\n                \"b\": \"CLIENT_ID(b)\",\n              }\n            }\n          }\n        }\n      </script>\n  </amp-analytics>\n\n  <!-- ## Destination Domains -->\n  <!--\n    Each linker will also accept an optional `destinationDomains` entry. You may use this to only add linker parameters to specific destinations. If this entry is omitted it will default to the source domain as well as the canonical domain. In the example below, only links to the `example.com` and `ampproject.org` domains would be decorated. These must be included as an array of domains.\n  -->\n  <amp-analytics>\n      <script type=\"application/json\">\n        {\n          \"linkers\" : {\n            \"enabled\": true,\n            \"destinationDomains\": ['example.com'],\n            \"linker1\": {\n              \"ids\": {\n                \"_foo\": \"CLIENT_ID(_foo)\"\n              }\n            }\n        }\n      </script>\n  </amp-analytics>\n\n  </body>\n</html>","document":{"sections":[{"doc_":"","code":"\n","preview":"","inBody":false,"id":0,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":true,"commentOffset":0,"codeOffset":0,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":""},{"doc_":"\n## Introduction\n\nLinker is an `amp-analytics` feature to join user sessions from the AMP Cache domain to publisher origin domains. For complete documentation please see the components' [reference](/amp-dev/documentation/components/reference/amp-analytics.md#linkers).\n\nIf you would like to learn more aboout client ids in AMP, you may find a brief summary [here](/amp-dev/documentation/guides-and-tutorials/optimize-measure/configure-analytics/analytics_basics.md#user-identification), as well as Google Analytics specific information [here](https://developers.google.com/analytics/devguides/collection/amp-analytics/client-id).\n\nTo see this whole process in action, please follow [this link](/static/samples/linker/demo-page.html).\n\n","code":"","preview":"","inBody":false,"id":1,"cachedMarkedDoc":"<h2 id=\"introduction\" class=\"www-heading pb4 mb2 relative h3\">Introduction</h2><p class=\"mb2 px1\">Linker is an <code>amp-analytics</code> feature to join user sessions from the AMP Cache domain to publisher origin domains. For complete documentation please see the components&#39; <a href=\"/amp-dev/documentation/components/reference/amp-analytics.md#linkers\">reference</a>.</p><p class=\"mb2 px1\">If you would like to learn more aboout client ids in AMP, you may find a brief summary <a href=\"/amp-dev/documentation/guides-and-tutorials/optimize-measure/configure-analytics/analytics_basics.md#user-identification\">here</a>, as well as Google Analytics specific information <a href=\"https://developers.google.com/analytics/devguides/collection/amp-analytics/client-id\">here</a>.</p><p class=\"mb2 px1\">To see this whole process in action, please follow <a href=\"/static/samples/linker/demo-page.html\">this link</a>.</p>","isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":0,"headings":[{"id":"introduction","name":"Introduction"}],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"\n## Introduction\n\nLinker is an `amp-analytics` feature to join user sessions from the AMP Cache domain to publisher origin domains. For complete documentation please see the components' [reference](/amp-dev/documentation/components/reference/amp-analytics.md#linkers).\n\nIf you would like to learn more aboout client ids in AMP, you may find a brief summary [here](/amp-dev/documentation/guides-and-tutorials/optimize-measure/configure-analytics/analytics_basics.md#user-identification), as well as Google Analytics specific information [here](https://developers.google.com/analytics/devguides/collection/amp-analytics/client-id).\n\nTo see this whole process in action, please follow [this link](/static/samples/linker/demo-page.html).\n\n"},{"doc_":"\n","code":"<!doctype html>\n<html ⚡>\n<head>\n  <meta charset=\"utf-8\">\n  <link rel=\"canonical\" href=\"http://localhost:8080/documentation/examples/advertising-analytics/joining_analytics_sessions/index.html\">\n  <meta name=\"viewport\" content=\"width=device-width,minimum-scale=1,initial-scale=1\">\n  <script async src=\"https://cdn.ampproject.org/v0.js\"></script>\n  <title>Joining Analytics Sessions</title>\n","preview":"","inBody":false,"id":2,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":0,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":" \n"},{"doc_":"## Setup\n","code":"","preview":"","inBody":false,"id":3,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":0,"headings":[{"id":"setup","name":"Setup"}],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"## Setup\n"},{"doc_":"Import the amp-analytics component in the header. \n","code":"<script async custom-element=\"amp-analytics\" src=\"https://cdn.ampproject.org/v0/amp-analytics-0.1.js\"></script>\n","preview":"","inBody":false,"id":4,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":2,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"Import the amp-analytics component in the header. \n"},{"doc_":"","code":"<style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>\n</head>\n<body>\n\n","preview":"\n","inBody":false,"id":5,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":2,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":""},{"doc_":"## Using AMP Linker with your existing analytics provider\n","code":"","preview":"","inBody":true,"id":6,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":0,"headings":[{"id":"using-amp-linker-with-your-existing-analytics-provider","name":"Using AMP Linker with your existing analytics provider"}],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"## Using AMP Linker with your existing analytics provider\n"},{"doc_":"\nIf your analytics provider is already supporting the Linker functionality, turning it on is a simple configuration change. Add the following to your exisisting `amp-analytics` configuration.\n\n","code":"<amp-analytics type=\"googleanalytics\">\n  <script type=\"application/json\">\n    {\n      \"linkers\": {\n        \"enabled\": true\n      }\n    }\n  </script>\n</amp-analytics>","preview":"  <div>\n    <amp-analytics type=\"googleanalytics\">\n      <script type=\"application/json\">\n        {\n          \"linkers\": {\n            \"enabled\": true\n          }\n        }\n      </script>\n    </amp-analytics>\n  </div>\n","inBody":true,"id":7,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":2,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"\nIf your analytics provider is already supporting the Linker functionality, turning it on is a simple configuration change. Add the following to your exisisting `amp-analytics` configuration.\n\n"},{"doc_":"","code":"\n","preview":"\n","inBody":true,"id":8,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":0,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":""},{"doc_":"## Using AMP Linker with custom analytics\n","code":"","preview":"","inBody":true,"id":9,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":0,"headings":[{"id":"using-amp-linker-with-custom-analytics","name":"Using AMP Linker with custom analytics"}],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"## Using AMP Linker with custom analytics\n"},{"doc_":"\nIf you wish to setup your own configuration, AMP linker supports that as well. In the following example a linker parameter with the name `linker1` will be appended to outgoing links. The value of this parameter will include any key-value pairs in the `ids` configuration object. Specifically in this example, two entries will be passed along. A key-value pair with the key `_a` and the value returned by the `CLIENT_ID` macro, and a key of `v` with the value `123`. You may include as many entries in the `ids` object as you wish.\n\n","code":"<amp-analytics>\n  <script type=\"application/json\">\n    {\n      ... // existing amp-analytics configuration\n      \"linkers\": {\n        \"linker1\": {\n          \"ids\": {\n            \"_a\": \"CLIENT_ID(_a)\",\n            \"v\": 123\n          },\n          \"enabled\": true\n        }\n      }\n    }\n  </script>\n</amp-analytics>\n","preview":"  <amp-analytics>\n    <script type=\"application/json\">\n      {\n        ... // existing amp-analytics configuration\n        \"linkers\": {\n          \"linker1\": {\n            \"ids\": {\n              \"_a\": \"CLIENT_ID(_a)\",\n              \"v\": 123\n            },\n            \"enabled\": true\n          }\n        }\n      }\n    </script>\n  </amp-analytics>\n","inBody":true,"id":10,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":2,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"\nIf you wish to setup your own configuration, AMP linker supports that as well. In the following example a linker parameter with the name `linker1` will be appended to outgoing links. The value of this parameter will include any key-value pairs in the `ids` configuration object. Specifically in this example, two entries will be passed along. A key-value pair with the key `_a` and the value returned by the `CLIENT_ID` macro, and a key of `v` with the value `123`. You may include as many entries in the `ids` object as you wish.\n\n"},{"doc_":"","code":"\n","preview":"\n","inBody":true,"id":11,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":0,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":""},{"doc_":"## Using AMP Linker with multiple linkers\n","code":"","preview":"","inBody":true,"id":12,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":0,"headings":[{"id":"using-amp-linker-with-multiple-linkers","name":"Using AMP Linker with multiple linkers"}],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"## Using AMP Linker with multiple linkers\n"},{"doc_":"\nYou may also want to configure multiple linkers on one page. To do this you would add an entry to the `linkers` object for each linker. You may also enable all the linkers at once by moving the `enabled: true` entry one level below the `linkers` object.\n\n","code":"<amp-analytics>\n  <script type=\"application/json\">\n    {\n      \"linkers\": {\n        \"enabled\": true,\n        \"linker1\": {\n          \"ids\": {\n            \"_a\": \"CLIENT_ID(_a)\",\n          }\n        },\n        \"linker2\": {\n          \"ids\": {\n            \"b\": \"CLIENT_ID(b)\",\n          }\n        }\n      }\n    }\n  </script>\n</amp-analytics>\n","preview":"  <amp-analytics>\n    <script type=\"application/json\">\n      {\n        \"linkers\": {\n          \"enabled\": true,\n          \"linker1\": {\n            \"ids\": {\n              \"_a\": \"CLIENT_ID(_a)\",\n            }\n          },\n          \"linker2\": {\n            \"ids\": {\n              \"b\": \"CLIENT_ID(b)\",\n            }\n          }\n        }\n      }\n    </script>\n  </amp-analytics>\n","inBody":true,"id":13,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":2,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"\nYou may also want to configure multiple linkers on one page. To do this you would add an entry to the `linkers` object for each linker. You may also enable all the linkers at once by moving the `enabled: true` entry one level below the `linkers` object.\n\n"},{"doc_":"","code":"\n","preview":"\n","inBody":true,"id":14,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":0,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":""},{"doc_":"## Destination Domains\n","code":"","preview":"","inBody":true,"id":15,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":0,"headings":[{"id":"destination-domains","name":"Destination Domains"}],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"## Destination Domains\n"},{"doc_":"\nEach linker will also accept an optional `destinationDomains` entry. You may use this to only add linker parameters to specific destinations. If this entry is omitted it will default to the source domain as well as the canonical domain. In the example below, only links to the `example.com` and `ampproject.org` domains would be decorated. These must be included as an array of domains.\n\n","code":"<amp-analytics>\n  <script type=\"application/json\">\n    {\n      \"linkers\": {\n        \"enabled\": true,\n        \"destinationDomains\": ['example.com'],\n        \"linker1\": {\n          \"ids\": {\n            \"_foo\": \"CLIENT_ID(_foo)\"\n          }\n        }\n      }\n  </script>\n</amp-analytics>\n","preview":"  <amp-analytics>\n    <script type=\"application/json\">\n      {\n        \"linkers\": {\n          \"enabled\": true,\n          \"destinationDomains\": ['example.com'],\n          \"linker1\": {\n            \"ids\": {\n              \"_foo\": \"CLIENT_ID(_foo)\"\n            }\n          }\n        }\n    </script>\n  </amp-analytics>\n","inBody":true,"id":16,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":2,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":"\nEach linker will also accept an optional `destinationDomains` entry. You may use this to only add linker parameters to specific destinations. If this entry is omitted it will default to the source domain as well as the canonical domain. In the example below, only links to the `example.com` and `ampproject.org` domains would be decorated. These must be included as an array of domains.\n\n"},{"doc_":"","code":"\n","preview":"\n","inBody":true,"id":17,"cachedMarkedDoc":false,"isLastSection":false,"isFirstSection":false,"commentOffset":0,"codeOffset":0,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":""},{"doc_":"","code":"</body>\n</html>\n","preview":"","inBody":false,"id":18,"cachedMarkedDoc":false,"isLastSection":true,"isFirstSection":false,"commentOffset":0,"codeOffset":0,"headings":[],"storyPageId":"","currentHint":"","hints":[],"filters":null,"normalizedDoc_":""}],"head":"  <meta charset=\"utf-8\">\n  <link rel=\"canonical\" href=\"http://localhost:8080/documentation/examples/advertising-analytics/joining_analytics_sessions/index.html\">\n  <meta name=\"viewport\" content=\"width=device-width,minimum-scale=1,initial-scale=1\">\n  <script async src=\"https://cdn.ampproject.org/v0.js\"></script>\n  <title>Joining Analytics Sessions</title>\n  <script async custom-element=\"amp-analytics\" src=\"https://cdn.ampproject.org/v0/amp-analytics-0.1.js\"></script>\n  <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>\n","styles":"","title":"Joining Analytics Sessions","metadata":{"hidePreview":"true","teaserImage":"/static/samples/img/teaser/joining_analytics_sessions.jpg","author":"lannka"},"body":"<body>","elementsAfterBody":"","isAmpStory":false,"isAmpWeb":true,"isAmpAds":false,"isAmpEmail":false,"firstImage":"/favicons/android-chrome-256x256.png","lang":"en","_description":"Linker is an amp-analytics feature to join user sessions from the AMP Cache domain to publisher origin domains."},"route":"/documentation/examples/advertising-analytics/joining_analytics_sessions/index.html"}